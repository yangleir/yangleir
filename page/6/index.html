<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://assz0a.coding-pages.com').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="学习笔记">
<meta property="og:url" content="http://assz0a.coding-pages.com/page/6/index.html">
<meta property="og:site_name" content="学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Yang Lei">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://assz0a.coding-pages.com/page/6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>学习笔记</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">学习笔记</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">85</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">5</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">149</span></a>

  </li>
        <li class="menu-item menu-item-tools">

    <a href="/tools" rel="section"><i class="fa fa-fw fa-wrench"></i>Tools</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://assz0a.coding-pages.com/2022/03/06/zotero/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xingchi.jpg">
      <meta itemprop="name" content="Yang Lei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/06/zotero/" class="post-title-link" itemprop="url">zotero基础操作和主要功能</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-03-06 19:34:06 / 修改时间：22:00:42" itemprop="dateCreated datePublished" datetime="2022-03-06T19:34:06+08:00">2022-03-06</time>
            </span>

          
            <span id="/2022/03/06/zotero/" class="post-meta-item leancloud_visitors" data-flag-title="zotero基础操作和主要功能" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/03/06/zotero/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/03/06/zotero/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="/images/zotero2.png" alt></p>
<p>Zotero是一款开源的文献管理软件，管理文献信息（如作者、标题、出版社、摘要、阅读笔记等）及相关材料（如PDF文件等)。在使用Linux之前，Endnote作为一款非常流行的知识管理软件，功能已经非常强大，可以满足windows用户需求。但Endnote跨平台和实时同步体验不够好，没有标签功能，非开源，过于臃肿等。类似的文献管理软件还有许多，也有一些可以跨平台同步使用，但使用了Zotero之后，发现所有需求都已经满足，不需要再学习别的工具了。</p>
<h1 id="读音和含义"><a href="#读音和含义" class="headerlink" title="读音和含义"></a>读音和含义</h1><p>Zotero读音为/zoʊˈtɛroʊ/，源于阿尔巴尼亚语<code>zotëroj</code>，意思是<code>to master</code>。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>到官网（<a href="https://www.zotero.org/）" target="_blank" rel="noopener">https://www.zotero.org/）</a> 下载相应操作系统的软件包，目前软件版本是5.0。Windows用户下载<code>exe</code>安装即可。Linux用户下载对应的32或者64位软件包，解压后在当前目录执行<code>zotero</code>可以启动软件，对于Ubuntu用户，可以使用下面的方法将图标添加到快速启动栏。</p>
<blockquote>
<p>For Ubuntu, the tarball includes a .desktop file that can be used to add Zotero to the launcher. Move the extracted directory to a location of your choice (e.g., /opt/zotero), run the set_launcher_icon script from a terminal to update the .desktop file for that location, and symlink zotero.desktop into ~/.local/share/applications/ (e.g., ln -s /opt/zotero/zotero.desktop ~/.local/share/applications/zotero.desktop). Zotero should then appear either in your launcher or in the applications list when click the grid icon (“Show Applications”), from which you can drag it to the launcher. </p>
</blockquote>
<p>之后，可在快速启动栏找到Zotero。</p>
<p>更多信息：<a href="https://www.zotero.org/support/installation" target="_blank" rel="noopener">https://www.zotero.org/support/installation</a></p>
<h1 id="文献下载类插件"><a href="#文献下载类插件" class="headerlink" title="文献下载类插件"></a>文献下载类插件</h1><h4 id="Zotero-Connector"><a href="#Zotero-Connector" class="headerlink" title="Zotero Connector"></a>Zotero Connector</h4><p><img src="/images/zotero.jpg" alt></p>
<p>以Firefox为例，首先安装必备的<code>Zotero Connector</code>，它可以自动识别网页中的文献信息，并通过点击插件按钮保存在<code>Zotero</code>本地数据库。该功能对于谷歌学术、ScienceDirect、WOS、Wiley Online Library、Springer Link、IEEE数据库、Nature、Science等数据和期刊平台通用。它的基本原理是识别网页中的DOI号。</p>
<h4 id="中文知网插件"><a href="#中文知网插件" class="headerlink" title="中文知网插件"></a>中文知网插件</h4><p><code>Zotero Connector</code>对于中文文献较为无力，因此Zotero的中文文献识别需要借助一个插件–Jasminum。下载地址为：<a href="https://github.com/l0o0/jasminum" target="_blank" rel="noopener">https://github.com/l0o0/jasminum</a> 。<br>基本功能有：</p>
<blockquote>
<ul>
<li>拆分或合并 Zotero 中条目作者姓和名</li>
<li>根据知网上下载的文献文件来抓取引用信息（就是根据文件名）</li>
<li>添加中文PDF/CAJ时，自动拉取知网数据，该功能默认关闭。需要到设置中开启，注意添加的文件名需要含有中文，全英文没有效果（还是根据文件名）</li>
<li>为知网的学位论文 PDF 添加书签</li>
<li>更新中文 translators</li>
<li>拉取文献引用次数，是否核心期刊</li>
</ul>
</blockquote>
<p><img src="/images/cnki.jpg" alt></p>
<p>如果浏览器登录了CNKI，并有下载权限，则Zotero可自动下载知网文献，若无下载权限，则仅保存文献信息。</p>
<p>该插件还有一个常用功能是把手动下载的知网文献拖入Zotero，然后右键提取知网文献信息，即可自动完成文献信息的抓取。<br><img src="/images/cnki2.jpg" alt><br>PDF文献也自动归到该文献目录下<br><img src="/images/cnki3.jpg" alt></p>
<h4 id="SCI-hub的接入"><a href="#SCI-hub的接入" class="headerlink" title="SCI-hub的接入"></a>SCI-hub的接入</h4><p>很多时候，我们没有各大数据库的下载权限，<code>Zotero Connector</code>只能抓取文献信息，不能下载文献。这时可以将Zotero和SCI-hub联合起来，达到几乎全能的下载效果。我们打开Zotero的首选项，进入<code>Advanced--&gt;Config Editor</code>。<br><img src="/images/edit.jpg" alt><br>搜索<code>extensions.zotero.findPDFs.resolvers</code>，双击编辑，删除<code>[]</code>，并将以下代码粘贴进去:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"Sci-Hub"</span>,</span><br><span class="line">    <span class="attr">"method"</span>:<span class="string">"GET"</span>,</span><br><span class="line">    <span class="attr">"url"</span>:<span class="string">"https://sci-hub.se/&#123;doi&#125;"</span>,</span><br><span class="line">    <span class="attr">"mode"</span>:<span class="string">"html"</span>,</span><br><span class="line">    <span class="attr">"selector"</span>:<span class="string">"#pdf"</span>,</span><br><span class="line">    <span class="attr">"attribute"</span>:<span class="string">"src"</span>,</span><br><span class="line">    <span class="attr">"automatic"</span>:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>选中单篇或者多篇文献，手动点击右键菜单中的<code>Find Available PDF</code>，会弹出单独的窗口显示下载进度。但SCI-hub对新文献收录较慢，新文献无法下载。这时，我们只需要淘宝10元包年或者15元永久账号就行了。</p>
<h1 id="写作类插件"><a href="#写作类插件" class="headerlink" title="写作类插件"></a>写作类插件</h1><h4 id="word-插件"><a href="#word-插件" class="headerlink" title="word 插件"></a>word 插件</h4><p>Zotero自动在windows平台上安装了<code>Word Processor Plugins</code>，可以从Tools → Add-ons查看。<br><img src="/images/word.jpg" alt></p>
<blockquote>
<p>You can reinstall the plugins later from the Cite → Word Processor Plugins pane of the Zotero preferences. If you’re having trouble, see Manually Installing the Zotero Word Processor Plugin or Word Processor Plugin Troubleshooting.<br>If you previously installed the Firefox versions of the word processor plugins into Zotero 5.0 or Zotero Standalone 4.0, you should uninstall them from Tools → Add-ons. </p>
</blockquote>
<p>更多信息：<a href="https://www.zotero.org/support/word_processor_plugin_installation" target="_blank" rel="noopener">https://www.zotero.org/support/word_processor_plugin_installation</a></p>
<h4 id="LibreOffice-插件"><a href="#LibreOffice-插件" class="headerlink" title="LibreOffice 插件"></a>LibreOffice 插件</h4><p>在linux系统下，Zotero支持LibreOffice插件，安装和使用类似Word。另外，Zotero对WPS的支持不是很好，虽然有，但是缺少维护，现在不能用了。</p>
<h1 id="写作"><a href="#写作" class="headerlink" title="写作"></a>写作</h1><h4 id="word"><a href="#word" class="headerlink" title="word"></a>word</h4><p>一般由于安装了word插件，word界面将中自动显示<code>zotero</code>按钮，可以直接使用。点击<code>Add /Edit Citation</code>，弹出第一个对话框，选择一个期刊要求的文献引用格式，如中文常用的GB/T7714-1987。如果系统没带想要的期刊文献格式，可以通过右下角的<code>Manage Styles</code>查找，一般期刊都可快速找到。<br><img src="/images/add.jpg" alt><br>确认后，将弹出一个输入框，这里和Endnote明显不同，Zotero的插入是需要手动输入一些单词进行搜索提示，比如输入<code>zotero</code>这个单词，系统自动显示数据库的文献。使用技巧是输入文献作者姓名加年份或者标题关键词，熟练之后发现这样也挺好。<br><img src="/images/add2.jpg" alt></p>
<p>然后，点击<code>Add/Edit Bibliography</code>，插入参考文献。效果为：<br><img src="/images/add3.jpg" alt></p>
<h4 id="latex"><a href="#latex" class="headerlink" title="latex"></a>latex</h4><p>以<code>overleaf</code>在线编辑为例。首先使用Zotero将需要的文献归类到一个目录，右键<code>Export collection</code>，导出bibTex文件。将bib文件上传到<code>overleaf</code>项目目录，进一步使用latex语法<code>\cite</code>插入文献即可。<br><img src="/images/out.jpg" alt></p>
<p><code>overleaf</code>会根据输入的单词（通常是作者姓氏）自动搜索bib文件中的文献。<br><img src="/images/add4.jpg" alt><br>由于期刊通常提供latex模板，这也包含了引文格式模板，因此用户不需要关心引文格式。</p>
<h1 id="文献跨平台同步"><a href="#文献跨平台同步" class="headerlink" title="文献跨平台同步"></a>文献跨平台同步</h1><h4 id="坚果云"><a href="#坚果云" class="headerlink" title="坚果云"></a>坚果云</h4><p>坚果云是一款办公云存储和同步系统。坚果云和zotero的搭配可以实现多个电脑之间（包括夸操作系统）的文献同步。这方便的教程网上已有很多，不再赘述。<br><img src="/images/jian.jpg" alt></p>
<p>需要注意的是，有时候重装系统后，数据库全部丢失，需要从云端重新下载。这时zotero的<code>Data Syncing</code>和<code>File Syncing</code>将发挥重要作用。我们无需手动copy，只要输入正确的云端地址，点击同步即可得到之前一模一样的数据库。这里不建议使用<code>Data Syncing</code>下面的<code>Sync full-text content</code>，可能和下面的<code>File Syncing</code>重复更新，增加流量消耗。</p>
<h1 id="Endnote-转入"><a href="#Endnote-转入" class="headerlink" title="Endnote 转入"></a>Endnote 转入</h1><p>Endnote用户尝试Zotero的第一步也是将Endnote数据库导入到Zotero中，这方面的教程也非常多，基本可以无缝导入了，包括文献文件。可参考：<a href="https://www.bilibili.com/read/cv7160554" target="_blank" rel="noopener">https://www.bilibili.com/read/cv7160554</a></p>
<h1 id="Feeds"><a href="#Feeds" class="headerlink" title="Feeds"></a>Feeds</h1><p><code>Feeds</code>即<code>RSS</code>更新订阅，一般的大点的期刊提供该功能，如JGR、Nature等。</p>
<blockquote>
<p>Feeds are a great way to discover new research. With feeds, you can subscribe to updates from a journal, website, publisher, institution, research group, or other source and quickly find new articles or works. If you find an item in a publication’s feed that you want to save and read further, you can add it to your Zotero library with the click of a button. </p>
</blockquote>
<p>以Nature为例，官网右上角点击<code>RSS feed</code>，复制浏览器网址<code>http://feeds.nature.com/nature/rss/current</code>。<br><img src="/images/feed.jpg" alt><br>回到Zotero，按下面操作添加即可。<br><img src="/images/feed2.jpg" alt><br><img src="/images/feed3.jpg" alt></p>
<h1 id="文献查重"><a href="#文献查重" class="headerlink" title="文献查重"></a>文献查重</h1><p><code>Duplicate Items</code>功能可以通过文献doi等信息，查找数据库中的重复文献，进一步可以合并同类文献，是数据库简洁无重复。</p>
<h1 id="我的文献"><a href="#我的文献" class="headerlink" title="我的文献"></a>我的文献</h1><p><code>My publications</code>可以集中保存管理自己发表的文献，这些文献也可以存在于其他文献集。哦，Zotero中任一个文献都可以存在于任意文献集（目录），通过按住<code>Ctrl</code>+点击文献，可以显示文献保存在那些文献目录中（显示黄色）。</p>
<p>本文仅列举一些常用的操作，Zotero的功能还有很多，网上也有非常多的学习教程。但对于一般用户来说，这些足够了。</p>
<p>综上，我们可以看到Zotero构建的不仅是文献管理生态，更是一个知识生态，期待大家可以利用好这个科研利器。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://assz0a.coding-pages.com/2022/01/03/haiyangcehui-30/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xingchi.jpg">
      <meta itemprop="name" content="Yang Lei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/03/haiyangcehui-30/" class="post-title-link" itemprop="url">从《海洋测绘》创刊四十年载文分析中国海洋测绘研究特征</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-01-03 21:33:45 / 修改时间：21:59:21" itemprop="dateCreated datePublished" datetime="2022-01-03T21:33:45+08:00">2022-01-03</time>
            </span>

          
            <span id="/2022/01/03/haiyangcehui-30/" class="post-meta-item leancloud_visitors" data-flag-title="从《海洋测绘》创刊四十年载文分析中国海洋测绘研究特征" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/01/03/haiyangcehui-30/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/03/haiyangcehui-30/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>在《海洋测绘》创刊40周年之际，对中国学术期刊出版总库所收录的近30年的2646篇有效文献进行科学计量研究，分别对文献的作者共现网络、机构共现网络和关键词共现网络进行了分析，结果表明《海洋测绘》发文主题主要涉及水深测量、GNSS、海图制作等领域，发文核心机构以海军海洋测绘研究所等军事研究院所为主，核心作者多隶属同一研究机构，具有密切合作网络。通过分阶段的时间演进分析，表明水深测量、GNSS、海图制作三大研究主题30年间长久不衰，卫星遥感、北斗导航定位等其他核心主题的研究趋势不断增强，热点主题往往与国内外相关科技发展趋势相呼应。</p>
</blockquote>
<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>《海洋测绘》于1981年创刊，由海军海洋测绘研究所主办[1]，是我国海洋测绘研究领域最为重要的学术性期刊，国内外公开发行，办刊特色是以报道海洋测绘专业领域为主，刊文主要涉及我国海洋测绘学术科技研究成果和国内外海洋测绘动态，并包括与海洋测绘相关的交叉学科（如物理海洋、水声学等）研究成果。《海洋测绘》被中国学术期刊综合评价数据库、中文核心期刊（遴选）数据库、中文期刊数据库和日本科学技术振兴机构数据库等多个国内外重要数据库收录，已连续11年评为“中国科技核心期刊”。2021年3月，依据文献计量学原理和方法，经过学科专家评审，《海洋测绘》入编《中文核心期刊要目总览》测绘学类的核心期刊表（北大核心）。</p>
<p>作为反映中国海洋测绘最高研究水平的学术型刊物，在《海洋测绘》创刊40周年及入编北大核心之际，有必要通过科学文献计量方法，分析其历史载文的机构、作者和热点主题特征，探讨我国海洋测绘近几十年研究的观点、方法、技术和实践的相关演变。文献计量是利用数学和统计学方法定量分析科技文献外部特征，包括文献的分布结构、数量关系、变化规律和共现聚类等，进而揭示学术研究的特征和规律[2]。在一些学术期刊的历史节点，已有不少学者对期刊进行了出版刊发情况分析。例如《地理学报》创刊70、80、85之际，姚鲁烽等人分别进行了期刊历史发文的总结[3–6]，为地理学发展提供相关参考数据，并且揭示了期刊的发展特点和趋势；刘凯等开展了《热带地理》创刊以来40周年的文献计量分析，研究了核心机构、作者等关键要素的合作关系[7]。</p>
<p>Citespace软件是目前国内外主流的文献计量软件之一，具备强大的文献计量分析能力，并且能够以可视化图谱的形式展现文献结构[8]，该软件已被广泛应用于期刊文献计量分析、知识图谱绘制以及大数据信息挖掘[9–12]。本文采用Citespace软件，基于中国学术期刊出版总库收录的《海洋测绘》论文，开展文献关键词聚类分析、关键词共现分析、关键词突现分析，以及研究机构和作者的共现和聚类分析，对《海洋测绘》载文的宏观脉络、知识体系进行探讨分析，以科学计量以及可视化的方法揭示《海洋测绘》文献的研究趋势，以期对中国海洋测绘工作者及相关领域人员提供参考，也为期刊未来发展提供历史节点性的总结。</p>
<h2 id="数据和方法"><a href="#数据和方法" class="headerlink" title="数据和方法"></a>数据和方法</h2><h3 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h3><p>数据收集和整理对文献计量分析的整体结果质量非常重要[13]，本文以中国知网（CNKI）为检索平台，检索中国学术期刊出版总库所收录的《海洋测绘》所有刊文，并剔除“目录”、“卷首语”、“导读”、“新闻”、“会议通知”、“编辑部声明”等主题的文章，得到2646篇有效文献作为本次分析的基础数据，其中时间跨度为1994-2020（CNKI缺失1981-1993年的《海洋测绘》数据）。</p>
<h3 id="分析工具和原理"><a href="#分析工具和原理" class="headerlink" title="分析工具和原理"></a>分析工具和原理</h3><p>Citespace为美国德雷塞尔大学陈超美教授开发的科学文献计量和可视化工具，其设计平台是Java，其算法基础主要用到了矩阵分析、统计学理论和交互式可视化。Citespace可以根据文献数据集构造一系列的引文对象及引文网络，可以在数据基础上开展主题聚类、网络分析、共引分析等[12,14]。Citespace的哲学基础是托马斯的科学革命的结构[15]，而设计灵感为社交网络的结构洞理论[16]，两种时间和空间的基础理论使得Citespace可以通过引入不同时间所出现的聚类，揭示不同主题的兴衰，可以通过结构洞在不同聚类间的连接，探测具有关键作用的节点。</p>
<p>本文主要选取《海洋测绘》文献中“关键词”、“机构”和“作者”三类节点进行计量分析和图谱绘制，因原始数据包含大量的节点和网络连接，为简化网络复杂性，在软件中设置每5年1个时间切片，并使用路径搜索算法（Pathfinder）和路径网络简化（pruning sliced networks）优化引文网络。Citespace生成的可视化图谱内容主要包含节点和连线，其中节点的大小可表征该节点在数据库中出现的频次，节点之间的连线粗细表示节点连接强度，节点的颜色表示出现的年代。Citespace聚类分析结果使用模块值（Q值）和平均轮廓值（S值）来衡量聚类效果，一般认为Q&gt;0.3则表示聚类结构显著，S&gt;0.5聚类是合理的。</p>
<h2 id="分析结果"><a href="#分析结果" class="headerlink" title="分析结果"></a>分析结果</h2><h3 id="文献总览"><a href="#文献总览" class="headerlink" title="文献总览"></a>文献总览</h3><p><img src="/images/hych/nums.jpg" alt><br><img src="/images/hych/%E5%88%86%E5%B8%83.png" alt></p>
<center>图 1 《海洋测绘》年发文数量演变以及文献的学科占比情况</center>

<p>分析年发文数量表明《海洋测绘》期刊在1994-2020年间共刊发学术型文献2600多篇，其中2001年以前的年刊文数量在50篇左右，2001年以后其年发文数量超过100篇，然而自2010年之后在年发文数量呈现轻微的下降趋势。学科组成统计表明《海洋测绘》文献中超过50%为自然地理学和测绘学学科，其次有约15%为海洋学学科，另外计算机、船舶工业以及地球物理等领域也有一定的占比。</p>
<h3 id="研究作者"><a href="#研究作者" class="headerlink" title="研究作者"></a>研究作者</h3><p>图 2 《海洋测绘》核心作者网络为《海洋测绘》文献核心作者的结构网络图谱，其中节点数为241个，网络连线为279条，从发文数量上，有6位作者超过50篇，有59位作者超过10篇，总体上发文作者的团队较为集中，合作较为紧密。依据社交网络的结构洞理论，核心作者在图谱中的节点位于中心位置，这类节点在作者合作网络中起到重要的连接作用，例如作者中的黄谟涛、刘雁春、翟国君、欧阳永忠、陆秀平、任来平、申家双等人均呈现高中心性特点，围绕此类核心作者往往形成作者合作群体。《海洋测绘》期刊的作者关键节点呈现出较为集中的特征，这表明核心作者可能隶属于同一机构。</p>
<p><img src="/images/hych/COA_v241e279.png" alt></p>
<center>图 2 《海洋测绘》核心作者网络</center>

<h3 id="载文机构"><a href="#载文机构" class="headerlink" title="载文机构"></a>载文机构</h3><p>科研机构作为宏观研究主题，分析研究机构的发文和合作网络有助于探明某领域的力量分布。通过对《海洋测绘》载文的研究机构分析，得到发文机构图谱（图 3），发现总体上发文机构以军事研究院所为主，其中以海军海洋测绘研究所、海军大连舰艇学院（含海洋测绘科学与工程系、海测工程系、海洋测绘系）、海军出版社、解放军信息工程大学（含测绘学院、地理空间信息学院）和海军工程大学导航工程系为核心机构形成了关键的研究网络。从数量上看，有23家机构的发文超过了20篇，其中16家为军事科研院所，统计表明海军海洋测绘研究所发文超过400篇，合作机构超过80家，海军大连舰艇学院和解放军信息工程大学发文超过300篇，合作机构超过30家，构成了《海洋测绘》发文最多、合作网络最密集的三大军事科研院所。</p>
<p>《海洋测绘》载文机构中除部队外，也存在少数的地方研究团队，形成和相对稳健的合作网，例如自然资源部第一海洋研究所、山东科技大学、中国测绘科学研究院等，这三家机构的节点分布较为集中，合作强度较显著，发文数量均超过20篇。此外，地方研究力量中还有武汉大学、天津海事局海测大队、国家海洋信息中心、中科院测量与地球物理研究所发文数量超过20篇。</p>
<p><img src="/images/hych/%E6%9C%BA%E6%9E%84.png" alt><br>图 3 《海洋测绘》载文机构共现分析</p>
<h3 id="研究主题"><a href="#研究主题" class="headerlink" title="研究主题"></a>研究主题</h3><p>关键词是文章主题的高度概括和浓缩，可体现研究热点的演变和延伸，通过关键词的聚类分析可以快速捕捉到对应领域的研究主题[17]。通过对1994-2020年间《海洋测绘》刊文的关键词进行共现分析，结果表明主要的关键词数量为203个，节点连线数量为541，网络密度为0.03，说明节点之间具有较强的联系。1994-2020年间《海洋测绘》文献中频次不少于20次的关键词如表 1 所示，多波束测深、地理信息系统、GPS、卫星测高、全球定位系统、水深测量、海道测量、海洋测量等构成了《海洋测绘》期刊文献知识网络的核心节点（中心性均大于0.1）。通过表 1，可知《海洋测绘》载文的主题可大致概括为水深测量、海图制作、GNSS等主题，其他核心关键词均可认为是与之相关的技术方法研究，例如多波束、卫星测高、GPS、北斗、地理信息系统、遥感影像等具体技术方法。</p>
<p>根据关键词的关联性，对《海洋测绘》发文关键词进行聚类分析，聚类结果表明平均轮廓值S为0.92，意味着聚类是令人信服的，模块值Q为0.7，意味着聚类结构显著。如图 4所示，《海洋测绘》关键词可划分为22个类别，聚类名称前的数字越小，表示聚类所包含的关键词越多。例如聚类第一类别（#0）归纳为数字地图，包含的主要关键词为：电子海图、纸质海图、海道测量、可用性分析、S-52、国际海图和生产模式等112个关键词，该类别主要涉及数字海图的生产，与我国海洋测绘的主要目标相一致；又如聚类第八类别（#7）为重力异常，主要包含的关键词为卫星测高、精度分析、海底地形、重力异常、大地水准面、垂线偏差、海面地形、潮汐等78个关键词，该类别对象主要涉及海洋重力的相关研究，可为海洋测量提供关键的垂直基准模型。</p>
<p>表 1 1994-2020年间《海洋测绘》发文出现频次大于20的关键词</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>关键词</th>
<th>频次</th>
<th>中心性</th>
<th>突现性</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>多波束测深</td>
<td>122</td>
<td>0.33</td>
<td>9.72</td>
</tr>
<tr>
<td>2</td>
<td>地理信息系统</td>
<td>82</td>
<td>0.16</td>
<td>18.53</td>
</tr>
<tr>
<td>3</td>
<td>GPS</td>
<td>79</td>
<td>0.24</td>
<td>5.32</td>
</tr>
<tr>
<td>4</td>
<td>卫星测高</td>
<td>62</td>
<td>0.22</td>
<td>3.39</td>
</tr>
<tr>
<td>5</td>
<td>全球定位系统</td>
<td>58</td>
<td>0.19</td>
<td>18.97</td>
</tr>
<tr>
<td>6</td>
<td>水深测量</td>
<td>54</td>
<td>0.24</td>
<td>4.31</td>
</tr>
<tr>
<td>7</td>
<td>海道测量</td>
<td>52</td>
<td>0.21</td>
<td>4.5</td>
</tr>
<tr>
<td>8</td>
<td>海洋测量</td>
<td>51</td>
<td>0.19</td>
<td>9.52</td>
</tr>
<tr>
<td>9</td>
<td>侧扫声纳</td>
<td>44</td>
<td>0.07</td>
<td>4.19</td>
</tr>
<tr>
<td>10</td>
<td>数字海图</td>
<td>42</td>
<td>0.07</td>
<td>3.45</td>
</tr>
<tr>
<td>11</td>
<td>海洋磁力测量</td>
<td>41</td>
<td>0.09</td>
<td>-</td>
</tr>
<tr>
<td>12</td>
<td>遥感影像</td>
<td>39</td>
<td>0.03</td>
<td>5.3</td>
</tr>
<tr>
<td>13</td>
<td>电子海图</td>
<td>38</td>
<td>0.12</td>
<td>-</td>
</tr>
<tr>
<td>14</td>
<td>数字高程模型</td>
<td>31</td>
<td>0.06</td>
<td>5.62</td>
</tr>
<tr>
<td>15</td>
<td>精度分析</td>
<td>30</td>
<td>0.09</td>
<td>-</td>
</tr>
<tr>
<td>16</td>
<td>海底地形</td>
<td>29</td>
<td>0.11</td>
<td>-</td>
</tr>
<tr>
<td>17</td>
<td>海图制图</td>
<td>28</td>
<td>0.01</td>
<td>-</td>
</tr>
<tr>
<td>18</td>
<td>精度</td>
<td>24</td>
<td>0.09</td>
<td>3.96</td>
</tr>
<tr>
<td>19</td>
<td>精密单点定位    24</td>
<td>0.05</td>
<td>6.2</td>
<td></td>
</tr>
<tr>
<td>20</td>
<td>数据处理</td>
<td>24</td>
<td>0.09</td>
<td>-</td>
</tr>
<tr>
<td>21</td>
<td>北斗卫星导航系统</td>
<td>24</td>
<td>0.05</td>
<td>8</td>
</tr>
<tr>
<td>22</td>
<td>声速剖面</td>
<td>22</td>
<td>0.03</td>
<td>6.41</td>
</tr>
</tbody></table>
<p><img src="/images/hych/%E8%81%9A%E7%B1%BB.png" alt><br>图 4 《海洋测绘》关键词前20个聚类分布</p>
<h3 id="知识演进"><a href="#知识演进" class="headerlink" title="知识演进"></a>知识演进</h3><p>使用Citespace对《海洋测绘》文献的知识演进分为5个时间阶段进行分析，分别是1994-2000、2001-2005、2006-2010、2011-2015和2016-2000，设置各个时间段的时间切片为1年，Top N设为50%，以提取各个时间段内出现频次最高的50个关键词[7]，得到各个阶段的关键词图谱如图 5 所示。总体上海图制作、GNSS和水深测量的研究主题贯穿1994-2020年《海洋测绘》文献，这三类主题的文献长久不衰。期间随着相关学科科学技术的发展，涌现出新的研究热点，如北斗导航定位系统、GIS、遥感等，也有一些热点时隔20多年后再次爆发，如卫星测高。下面对5个时间阶段具体分析。</p>
<p>1994-2000年间，《海洋测绘》的高频关键词为GPS、卫星测高、海道测量、测深仪和水深测量等，通过聚类得到的主要研究主题为重力异常、动态定位精度、测深仪、测深精度和定位精度等。图 5a表明该时期的突出特征我国学者卫星测高技术开展大量的研究，并应用于大地水准面、重力场和海面地形等海洋大地测量领域，这是由于海洋测高卫星T/P（1993-2003）取得了成功，并在国际上引发测高研究热潮，由此可见我国海洋测绘学者具有较敏锐的热点洞察能力，能够及时有效的应用国际新兴技术。</p>
<p>2001-2005年间，《海洋测绘》载文的研究高频关键词为GIS、海洋测量、多波束测深、水深测量和数字海图等，聚类主题主要为GIS、GPS、水深测量、国际海道测量组织和地图集等。该时间段，地理信息系统GIS的热度最高，关键词频次和聚类强度均居首位，此外该阶段也出现了多波束测深、侧扫声呐、海洋磁力等方向的研究热点。表明该阶段我国海洋测绘的数据容量和装备能力都有所提升，对新型数据管理和装备应用的相关理论研究提出了需求。</p>
<p>2006-2010年间，《海洋测绘》载文的热点关键词主要为全球定位系统、GIS、多波束测深、数字高程模型、数字海图等，聚类分析得到主要研究主题为全球定位系统、GIS、生产模式、遥感图像处理、侧扫声呐等。该阶段的研究热点基本如前一阶段，但首次出现了遥感类的关键词聚类，其核心关键词主要包含遥感影像、图像处理、高光谱等，表明遥感技术已广泛应用于海洋测绘领域。</p>
<p>2011-2015年间，《海洋测绘》载文的高频关键词为多波束测深、GPS、侧扫声呐、北斗卫星导航系统和精度等，聚类主题主要为多波束测深、定位精度、余水位、惯导和海洋重力仪等。和前几阶段比较，北斗导航定位系统开始在海洋测绘工作中发挥作用，同时我国的海洋测绘研究方向更加精细化。</p>
<p>2016-2020年间，《海洋测绘》载文的高频关键词主要为多波束测深、测绘学名词（第三版）、卫星测高、遥感影像和声速剖面等，聚类研究主题主要包含声速剖面、测绘学名词（第三版）、电子海图、覆盖性（北斗）和计算精度等。结果表明在20年之后，卫星测高再次成为核心节点（中心性0.26，明显大于0.1），这可能和我国海洋测高卫星（如HY-2A/B/C等）的快速发展相关，国内外多任务测高卫星采集的高分辨率和高精度卫星测高数据进一步提升了重力场、海底地形反演的空间分辨率和精度。此外，该时期《海洋测绘》刊载了《测绘学名词》（第三版）摄影测量与遥感、大地测量学等名词的权威释义，这对于规范新形势下快速发展的测绘行业交流具有重要意义。</p>
<p><img src="/images/hych/1994-2000.png" alt><br>a<br><img src="/images/hych/2000-2005.png" alt><br>b<br><img src="/images/hych/2006-2010.png" alt><br>c<br><img src="/images/hych/2011-2015.png" alt><br>d<br><img src="/images/hych/2016-2020.png" alt></p>
<center>图 5 《海洋测绘》1994-2020年间的文献关键词演变。a)为1994-2000，b)为2001-2005，c)为2006-2010，d)为2011-2015，e)为2016-2020。</center>

<h2 id="结论和展望"><a href="#结论和展望" class="headerlink" title="结论和展望"></a>结论和展望</h2><p>本文通过文献计量分析，从发文数量、作者合作网、机构合作网、关键词网络以及主题演进等方面，研究了《海洋测绘》创刊40年来最近30年的文献特征。总体来看，《海洋测绘》载文的核心主题主要为水深测量、GNSS、海图制作等，发文机构主要是军事海洋测绘院所，其次为我国海洋业务主管部门下设的海洋研究院所及调查机构，高产的发文作者较为集中，大多数隶属于同一研究机构，高产作者间合作密切。分时间阶段研究表明GNSS、多波束测深、海图制作三大主题长久不衰，GIS方向在2000-2010年间出现研究热潮，但之后热度快速衰退，卫星测高在1994-2000年间为热点研究领域，并且在近20年后再次发展为热点研究，这与我国海洋动力卫星计划的顺利实施密切相关，同时，随着我国北斗导航定位系统的逐步全球组网，北斗在2011年之后也成为重要的研究热点。</p>
<p>跨度近30年的文献分析表明，我国《海洋测绘》的研究视角逐步向综合、交叉和融合转变，海洋测绘、空间信息技术、物理海洋和声学等学科的交叉融合不断增强，在研究内容方面逐步细化，特别近几年出现对不同类型的测量误差的专门研究，研究方法和技术方面出现了从海洋实测到卫星遥感的扩展。结合海洋测绘学科特性，我们建议中国海洋测绘学者应以更加开放的态度，引入其他交叉学科，目前诸如大数据、人工智能等新发展的技术在海洋测绘领域的应用稍显不足，并进一步重视海洋测绘在海洋经济发展的基础性作用，不断加强军地海洋测绘融合。</p>
<h2 id="参考文献-略"><a href="#参考文献-略" class="headerlink" title="参考文献(略)"></a>参考文献(略)</h2><blockquote>
<p>作者：杨磊1,2，曹永港2,3，欧阳永忠2,3，周兴华1,4<br>(1.    自然资源部第一海洋研究所, 山东 青岛 266061; 2. 自然资源部海洋环境探测技术与应用重点实验室，广东 广州 510300; 3. 国家海洋局南海调查技术中心，广东 广州 510300；4. 山东科技大学海洋科学与工程学院，山东 青岛 266590)</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://assz0a.coding-pages.com/2022/01/03/gmt-srtm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xingchi.jpg">
      <meta itemprop="name" content="Yang Lei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/03/gmt-srtm/" class="post-title-link" itemprop="url">Pygmt利用在线数据绘制地形图</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-01-03 20:19:42 / 修改时间：21:24:38" itemprop="dateCreated datePublished" datetime="2022-01-03T20:19:42+08:00">2022-01-03</time>
            </span>

          
            <span id="/2022/01/03/gmt-srtm/" class="post-meta-item leancloud_visitors" data-flag-title="Pygmt利用在线数据绘制地形图" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/01/03/gmt-srtm/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/03/gmt-srtm/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ＧＭＴ和Pygmt提供了一个远程数据功能，可以使用函数datasets远程下载多种在线数据，并进行处理和绘图。这里以pygmt为例绘制海底地壳年龄、陆地地形。</p>
<h3 id="Global-Earth-Seafloor-Crustal-Age-Grids"><a href="#Global-Earth-Seafloor-Crustal-Age-Grids" class="headerlink" title="Global Earth Seafloor Crustal Age Grids"></a>Global Earth Seafloor Crustal Age Grids</h3><p><a href="https://www.generic-mapping-tools.org/remote-datasets/earth-age.html" target="_blank" rel="noopener">地壳数据</a>包含了不同的分辨率，对应不同文件大小，最粗为1d，全球数据仅125K，最大分辨率1m，全球数据188M。</p>
<h4 id="绘图"><a href="#绘图" class="headerlink" title="绘图"></a>绘图</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import pygmt</span><br><span class="line">grid_globe = pygmt.datasets.load_earth_age(<span class="attribute">resolution</span>=<span class="string">'06m'</span>, <span class="attribute">region</span>=<span class="string">"-180/180/-90/90"</span>, <span class="attribute">registration</span>=None)</span><br><span class="line">fig = pygmt.Figure()</span><br><span class="line">fig.grdimage(<span class="attribute">grid</span>=grid_globe, <span class="attribute">projection</span>=<span class="string">"R15c"</span>, <span class="attribute">region</span>=<span class="string">"0/360/-89/89"</span>, <span class="attribute">frame</span>=<span class="literal">True</span>,cmap="crustal_age.cpt")</span><br><span class="line">fig.colorbar(frame=[<span class="string">"af"</span>, <span class="string">"x+lage"</span>, <span class="string">"y+lMyr"</span>],<span class="attribute">cmap</span>=<span class="string">"crustal_age.cpt"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<p>上面的调色板<code>crustal_age</code>可以在<code>.gmt/cache/</code>下找到，而远程数据也下载到了<code>./gmt/server/</code>下面。</p>
<p><img src="/images/age.png" alt></p>
<h3 id="地形数据"><a href="#地形数据" class="headerlink" title="地形数据"></a>地形数据</h3><p><a href="https://www.generic-mapping-tools.org/remote-datasets/earth-relief.html" target="_blank" rel="noopener">地形数据</a>包含多种不同分辨率，对饮不同的文件大小，最粗为1d，文件大小128k，最高分辨率为1s，文件大小达41G：</p>
<h4 id="SRTM绘图"><a href="#SRTM绘图" class="headerlink" title="SRTM绘图"></a>SRTM绘图</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 雅鲁藏布江大峡谷</span></span><br><span class="line">grid = pygmt.datasets.load_earth_relief(</span><br><span class="line">    <span class="string">"03s"</span>,</span><br><span class="line">    region=[94, 95.5, 29, 30],</span><br><span class="line">    <span class="attribute">registration</span>=<span class="string">"gridline"</span>,</span><br><span class="line">    <span class="attribute">use_srtm</span>=<span class="literal">True</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># calculate the reflection of a light source projecting from west to east</span></span><br><span class="line"><span class="comment"># (azimuth of 270 degrees) and at a latitude of 30 degrees from the horizon</span></span><br><span class="line">dgrid = pygmt.grdgradient(<span class="attribute">grid</span>=grid, radiance=[270, 30])</span><br><span class="line"></span><br><span class="line">fig = pygmt.Figure()</span><br><span class="line">fig.grdimage(<span class="attribute">grid</span>=grid, <span class="attribute">projection</span>=<span class="string">"M15c"</span>, region=[94, 95.5, 29, 30], frame=[<span class="string">'WSrt+t"Original Data Elevation Model"'</span>,<span class="string">"xa"</span>, <span class="string">"ya"</span>],<span class="attribute">cmap</span>=<span class="string">"dem1"</span>)</span><br><span class="line">fig.colorbar(<span class="attribute">position</span>=<span class="string">"JML+o1.8c/0c+w10c/0.9c"</span>,frame=[<span class="string">"af"</span>, <span class="string">"y+lmeter"</span>])</span><br><span class="line">fig.coast(<span class="attribute">rivers</span>=<span class="string">"a/1p"</span>,borders="2/5,red")</span><br><span class="line"></span><br><span class="line"><span class="comment"># Shift plot origin of the second map by 12.5 cm in x direction</span></span><br><span class="line">fig.shift_origin(<span class="attribute">xshift</span>=<span class="string">"20c"</span>)</span><br><span class="line">pygmt.makecpt(<span class="attribute">cmap</span>=<span class="string">"gray"</span>, series=[-1.5, 0.3, 0.01])</span><br><span class="line">fig.grdimage(</span><br><span class="line">    <span class="attribute">grid</span>=dgrid,</span><br><span class="line">    <span class="attribute">projection</span>=<span class="string">"M15c"</span>,</span><br><span class="line">    frame=[<span class="string">'lSEt+t"Hillshade Map"'</span>, <span class="string">"xa0.1"</span>, <span class="string">"ya0.1"</span>],</span><br><span class="line">    <span class="attribute">cmap</span>=<span class="literal">True</span>,</span><br><span class="line">)</span><br><span class="line">fig.coast(<span class="attribute">rivers</span>=<span class="string">"a/1p"</span>,borders="2/5,red")</span><br><span class="line"></span><br><span class="line"><span class="comment"># Shift plot origin of the second map by 12.5 cm in x direction</span></span><br><span class="line">fig.shift_origin(<span class="attribute">xshift</span>=<span class="string">"20c"</span>)</span><br><span class="line">fig.grdimage(</span><br><span class="line">    <span class="attribute">grid</span>=grid,</span><br><span class="line">    <span class="attribute">shading</span>=dgrid,</span><br><span class="line">    <span class="attribute">projection</span>=<span class="string">"M15c"</span>,</span><br><span class="line">    frame=[<span class="string">'lSEt+t"Hillshade Map"'</span>, <span class="string">"xa0.1"</span>, <span class="string">"ya0.1"</span>],</span><br><span class="line">    <span class="attribute">cmap</span>=<span class="string">"dem1"</span>,</span><br><span class="line">)</span><br><span class="line">fig.coast(<span class="attribute">rivers</span>=<span class="string">"a/1p"</span>,borders="2/5,red")</span><br><span class="line"></span><br><span class="line">fig.show(<span class="attribute">width</span>=<span class="string">"20c"</span>)</span><br><span class="line">fig.savefig(<span class="string">"srtm.png"</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/images/srtm.png" alt></p>
<h4 id="3D地形图"><a href="#3D地形图" class="headerlink" title="3D地形图"></a>3D地形图</h4><p>同样，我们还可以使用<code>pygmt.grdview</code>绘制三维地形图。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">fig = pygmt.Figure()</span><br><span class="line">fig.grdview(</span><br><span class="line">    <span class="attribute">grid</span>=grid,</span><br><span class="line">    region=[94.7, 95.2, 29.5, 30],</span><br><span class="line">    perspective=[250, 60],</span><br><span class="line">    frame=[<span class="string">"xa"</span>, <span class="string">"ya"</span>, <span class="string">"WSNE"</span>],</span><br><span class="line">    <span class="attribute">projection</span>=<span class="string">"M15c"</span>,</span><br><span class="line">    <span class="attribute">zsize</span>=<span class="string">"15c"</span>,</span><br><span class="line">    <span class="attribute">surftype</span>=<span class="string">"s"</span>,</span><br><span class="line">    <span class="attribute">cmap</span>=<span class="string">"dem1"</span>,</span><br><span class="line">    # <span class="builtin-name">Set</span> the plane elevation <span class="keyword">to</span> 1,000 meters <span class="keyword">and</span> make the fill <span class="string">"gray"</span></span><br><span class="line">    <span class="attribute">plane</span>=<span class="string">"000+ggray"</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/images/3d.png" alt></p>
<h4 id="附：遥感影像和地形的结合"><a href="#附：遥感影像和地形的结合" class="headerlink" title="附：遥感影像和地形的结合"></a>附：遥感影像和地形的结合</h4><p>在github存在一个<code>30Day*****</code>的系列代码库，其中包含绘图领域的<code>30DayMapChallenge2021</code>，恰好已经使用GMT完成了这项工作，作者是Pygmt的核心开发者Weiji。</p>
<p>这里有两个遥感影像和地形结合的例子（17和18），可以作为很好的学习材料.</p>
<p><img src="/images/day18_water.png" alt><br><img src="/images/day17_land.png" alt></p>
<p>代码请前往：<a href="https://github.com/weiji14/30DayMapChallenge2021" target="_blank" rel="noopener">https://github.com/weiji14/30DayMapChallenge2021</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://assz0a.coding-pages.com/2021/12/12/fluid2d/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xingchi.jpg">
      <meta itemprop="name" content="Yang Lei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/12/fluid2d/" class="post-title-link" itemprop="url">Fluid2d 流体动力学软件</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-12-12 20:23:29 / 修改时间：21:52:46" itemprop="dateCreated datePublished" datetime="2021-12-12T20:23:29+08:00">2021-12-12</time>
            </span>

          
            <span id="/2021/12/12/fluid2d/" class="post-meta-item leancloud_visitors" data-flag-title="Fluid2d 流体动力学软件" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/12/12/fluid2d/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/12/12/fluid2d/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Fluid2d"><a href="#Fluid2d" class="headerlink" title="Fluid2d"></a>Fluid2d</h3><p>Fluid2d是通用的Python-Fortran CFD代码包，它包含了大量的二维流体方程。该软件对于学生学习流体力学或地球物理流体动力学很有帮助，也可以是授课老师的教学实践工具。 其思想是在计算流时可视化动态流，且参数变化的影响可以立即看到。 二维流体的关键量是涡度，如果你的涡度动力学很弱，这个代码是为你准备的。 你应该迅速成为专家一样的专家。由于动画的强大功能，用户可以了解基本流体性质，进一步超越教科书而触及学术研究的问题是很容易的。  </p>
<p>有几个功能特别好： </p>
<ul>
<li>代码可处理许多不同的方程组:transport, Euler, quasi-geostrophic, Boussinesq, thermal wind equations。  </li>
<li>代码处理一个允许具有复杂几何形状的掩模系统(具有任意形状的封闭域)  </li>
<li>代码往往具有非常低的dissipation水平  </li>
<li>允许研究边界层问题的no-slip条件  </li>
<li>代码是并行的，如果需要高分辨率，可以在集群上运行。</li>
</ul>
<h3 id="下载和安装"><a href="#下载和安装" class="headerlink" title="下载和安装"></a>下载和安装</h3><p>软件主页：<a href="http://pagesperso.univ-brest.fr/~roullet/fluid2d/index.html" target="_blank" rel="noopener">http://pagesperso.univ-brest.fr/~roullet/fluid2d/index.html</a><br>最新版下载地址：<a href="https://github.com/pvthinker/Fluid2d" target="_blank" rel="noopener">https://github.com/pvthinker/Fluid2d</a></p>
<p>安装步骤：</p>
<p>作者提供了一个快速编译和安装脚本<code>install.sh</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">pydir=<span class="variable">$HOME</span>/.fluid2d</span><br><span class="line">default=core/defaults.json</span><br><span class="line">srcdir=`<span class="built_in">pwd</span>`</span><br><span class="line">myexpdir=<span class="variable">$srcdir</span>/myexp</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"--------------------------------------------------------------------------------"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">" Installing Fluid2d"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"It is recommended to create a virtual environnement. "</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"If you are using anaconda then you may create the 'pyrsw' environment with"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"&gt; conda env create -f environment.yml"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"then whenever you want to use Fluid2d, switch to this environement with"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"&gt; conda activate fluid2d"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Are you ok with you environment? (y/n)"</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$ok</span> = <span class="string">"n"</span> ]; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">exit</span> 42</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -d <span class="string">"<span class="variable">$pydir</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"  Create <span class="variable">$pydir</span>"</span></span><br><span class="line">    mkdir <span class="variable">$pydir</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ ! -f <span class="string">"<span class="variable">$pydir</span>/<span class="variable">$default</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"  Copy <span class="variable">$default</span> in <span class="variable">$pydir</span>"</span></span><br><span class="line">    cp <span class="variable">$default</span> <span class="variable">$pydir</span>/</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ ! -d <span class="string">"<span class="variable">$myexpdir</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"  Create <span class="variable">$myexpdir</span>"</span></span><br><span class="line">    mkdir <span class="variable">$myexpdir</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  Copy reference experiments in <span class="variable">$myexpdir</span>"</span></span><br><span class="line">cp -pR <span class="variable">$srcdir</span>/experiments/* <span class="variable">$myexpdir</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for bash users</span></span><br><span class="line">cat &gt; <span class="variable">$pydir</span>/activate.sh &lt;&lt; EOF</span><br><span class="line"><span class="built_in">export</span> PYTHONPATH=`<span class="built_in">pwd</span>`/core</span><br><span class="line"><span class="built_in">echo</span> Python now knows that Fluid2d is <span class="keyword">in</span> `<span class="built_in">pwd</span>`</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># for csh, tcsh users</span></span><br><span class="line">cat &gt; <span class="variable">$pydir</span>/activate.csh &lt;&lt; EOF</span><br><span class="line">setenv PYTHONPATH `<span class="built_in">pwd</span>`/core</span><br><span class="line"><span class="built_in">echo</span> Python now knows that Fluid2d is <span class="keyword">in</span> `<span class="built_in">pwd</span>`</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># for fish users</span></span><br><span class="line">cat &gt; <span class="variable">$pydir</span>/activate.fish &lt;&lt; EOF</span><br><span class="line"><span class="built_in">set</span> -gx PYTHONPATH `(<span class="built_in">pwd</span>)`/core</span><br><span class="line"><span class="built_in">echo</span> Python now knows that Fluid2d is <span class="keyword">in</span> `(<span class="built_in">pwd</span>)`</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># compile the modules with module</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"--------------------------------------------------------------------------------"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">" Compile modules with f2py"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"># try</span></span><br><span class="line">    make</span><br><span class="line">    </span><br><span class="line">&#125; || &#123;</span><br><span class="line">    <span class="comment">#catch</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Unable to compile"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Are you sure f2py is installed?"</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># copy the experiment into</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  Before starting, please read this note carefully"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  As it configured, Fluid2d will store the results in"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"      *** <span class="variable">$HOME</span>/data/fluid2d ***"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  If you don't run the code from your laptop then it is likely that"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  you are not allowed to store large binary files on <span class="variable">$HOME</span>/data"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  because this is your home."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  In this case, edit <span class="variable">$HOME</span>/.fluid2d/defaults.json"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  and set 'datadir' default value (in the output section) to a"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  place where you are authorized to store large binary files."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  In the jargon, this place is usually a 'work' directory."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  If you are unsure where to store your results check that"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  with your system administrator."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  Once you know where to store the results, then you're good to go"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  Each time you open a new terminal you need to"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"     source ~/.fluid2d/activate.sh  if you're under bash"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"     source ~/.fluid2d/activate.csh  if you're under csh/tcsh"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"     source ~/.fluid2d/activate.fish  if you're under fish"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  To run your first experiment"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"      cd <span class="variable">$myexpdir</span>/Vortex"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"      python3 vortex.py"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  Write your new experiments in <span class="variable">$myexpdir</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"  or wherever you want, but not in <span class="variable">$srcdir</span>/experiments !"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br></pre></td></tr></table></figure>

<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>运行之前需要在主目录下新建文件夹：</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">mkdir</span> <span class="class"><span class="keyword">data</span></span></span><br><span class="line"><span class="title">cd</span> <span class="class"><span class="keyword">data</span> </span></span><br><span class="line"><span class="title">mkdir</span> fluid2d</span><br></pre></td></tr></table></figure>

<p>执行例子：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> myexp/ShearInstab</span><br><span class="line"><span class="keyword">python3</span> shear_instability.<span class="keyword">py</span></span><br></pre></td></tr></table></figure>

<p>结果输出：</p>
<p><img src="/images/shear.gif" alt></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://assz0a.coding-pages.com/2021/12/12/gnssbuoy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xingchi.jpg">
      <meta itemprop="name" content="Yang Lei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/12/gnssbuoy/" class="post-title-link" itemprop="url">gnss浮标数据共享</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-12-12 15:20:18 / 修改时间：20:07:21" itemprop="dateCreated datePublished" datetime="2021-12-12T15:20:18+08:00">2021-12-12</time>
            </span>

          
            <span id="/2021/12/12/gnssbuoy/" class="post-meta-item leancloud_visitors" data-flag-title="gnss浮标数据共享" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/12/12/gnssbuoy/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/12/12/gnssbuoy/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="共享动机"><a href="#共享动机" class="headerlink" title="共享动机"></a>共享动机</h3><p>GNSS浮标一种古老而又新颖的测量设备，在海洋具有广泛的应用场景。当前我国海洋调查数据共享普遍较弱，而GNSS浮标的研究由于更加小众，网上很难找到此类数据。为了促进国内学者进行相关研究工作，决定公开GNSS浮标数据。此外在前面的公众号文章中，也已经承诺数据共享，此次公开数据也是执行上次的承诺。</p>
<h3 id="数据表"><a href="#数据表" class="headerlink" title="数据表"></a>数据表</h3><table>
<thead>
<tr>
<th>时间</th>
<th>地点</th>
<th>基站</th>
<th>航迹</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>20140707-0709</td>
<td>青岛千里岩</td>
<td>Y</td>
<td>Y</td>
<td>卫星高度计定标</td>
</tr>
<tr>
<td>20140915-0919</td>
<td>青岛千里岩</td>
<td>Y</td>
<td>N</td>
<td>卫星高度计定标</td>
</tr>
<tr>
<td>20141015-1015</td>
<td>青岛田横岛</td>
<td>Y</td>
<td>N</td>
<td>卫星高度计定标</td>
</tr>
<tr>
<td>20150410-0410</td>
<td>青岛田横岛</td>
<td>Y</td>
<td>N</td>
<td>卫星高度计定标</td>
</tr>
<tr>
<td>20150502-0502</td>
<td>珠海担杆岛</td>
<td>Y</td>
<td>Y</td>
<td>卫星高度计定标</td>
</tr>
<tr>
<td>20150629-0701</td>
<td>青岛千里岩</td>
<td>Y</td>
<td>N</td>
<td>卫星高度计定标</td>
</tr>
<tr>
<td>20190331-0401</td>
<td>青岛小麦岛</td>
<td>Y</td>
<td>Y</td>
<td>机载高度计定标</td>
</tr>
<tr>
<td>20190714-0715</td>
<td>威海成山头</td>
<td>Y</td>
<td>Y</td>
<td>卫星高度计定标</td>
</tr>
<tr>
<td>20190826-0827</td>
<td>威海成山头</td>
<td>Y</td>
<td>Y</td>
<td>卫星高度计定标</td>
</tr>
<tr>
<td>20210520-0524</td>
<td>青岛小麦岛</td>
<td>N</td>
<td>Y</td>
<td>低成本浮标测试</td>
</tr>
</tbody></table>
<h3 id="数据下载"><a href="#数据下载" class="headerlink" title="数据下载"></a>数据下载</h3><p><a href="https://zenodo.org/record/5774652" target="_blank" rel="noopener">https://zenodo.org/record/5774652</a></p>
<h3 id="数据描述"><a href="#数据描述" class="headerlink" title="数据描述"></a>数据描述</h3><p>数据格式主要为GNSS通用RINEX格式。少数试验数据为硬件厂家格式，使用者需要使用相关软件进行格式转换。</p>
<h3 id="数据解算软件"><a href="#数据解算软件" class="headerlink" title="数据解算软件"></a>数据解算软件</h3><p>很多软件可以用于解算动态的浮标数据，比如：</p>
<ul>
<li><a href="http://geoweb.mit.edu/gg/" target="_blank" rel="noopener">GAMIT</a></li>
<li><a href="http://www.bernese.unibe.ch/" target="_blank" rel="noopener">Bernese GNSS</a></li>
<li><a href="http://www.rtklib.com/" target="_blank" rel="noopener">RTKLIB</a></li>
<li><a href="http://pride.whu.edu.cn/indexone.shtml" target="_blank" rel="noopener">PRIDE PPP-AR</a></li>
<li><a href="https://webapp.geod.nrcan.gc.ca/geod/tools-outils/ppp.php" target="_blank" rel="noopener">CSRS-PPP</a><br>我们发现RtkLib容易上手，PPPpride对廉价芯片数据的处理更加优秀，CSRS-PPP更加智能化。GAMIT有点老，但是很经典，Bernese功能强大，是收费软件。此外还有一些其他的商业或者免费软件可以GNSS数据，无法一一列举。</li>
</ul>
<h3 id="浮标应用场景"><a href="#浮标应用场景" class="headerlink" title="浮标应用场景"></a>浮标应用场景</h3><p>本次共享的GNSS浮标数据主要是卫星高度计定标项目所采集，因此也主要用于了海面高度和海浪测量。GNSS浮标可以准确的获得地心坐标系下的三维海面起伏，数据频率通常使用1Hz，可以有效的提取潮汐信息和波浪信息。</p>
<ul>
<li>卫星高度计定标</li>
<li>机载高度计定标</li>
<li>远海潮汐测量</li>
<li>波浪全要素测量</li>
<li>大地水准面评估</li>
</ul>
<p>它还有很多应用没有挖掘，更多信息见：<a href="https://mp.weixin.qq.com/s?__biz=Mzg3MDU0MjYwMw==&mid=2247484478&idx=1&sn=0b724d0a3e9818c1c0e69e5e45bdbb6e&chksm=ce8d785af9faf14cccef5a21da24b1c0bc1aacb3c2b2bb7a083a21106c1d73b39cac74647d57&token=1728212089&lang=zh_CN#rd" target="_blank" rel="noopener">小型低成本GNSS浮标研发及初步结果</a></p>
<h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><p>数据引用格式：</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@dataset&#123;lei_yang_2021_5774652,</span><br><span class="line">  <span class="attr">author</span>       = &#123;Lei Yang&#125;,</span><br><span class="line">  <span class="attr">title</span>        = &#123;GNSS buoy data&#125;,</span><br><span class="line">  <span class="attr">month</span>        = dec,</span><br><span class="line">  <span class="attr">year</span>         = <span class="number">2021</span>,</span><br><span class="line">  <span class="attr">publisher</span>    = &#123;Zenodo&#125;,</span><br><span class="line">  <span class="attr">doi</span>          = &#123;<span class="number">10.5281</span>/zenodo.<span class="number">5774652</span>&#125;,</span><br><span class="line">  <span class="attr">url</span>          = &#123;https://doi.org/<span class="number">10.5281</span>/zenodo.<span class="number">5774652</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果数据对您的研究有用，也可以考虑引用如下论文：<br>[1]LIN Z, LEI Y, YONGSHENG X, 等. Retrieving wave parameters with PPP mode from GNSS buoy measurements[J]. IEEE Geoscience and Remote Sensing Letters, 2020, Early Access. DOI:10.1109/LGRS.2020.3041846.<br>[2]LEI Y, XINGHUA Z, P. M S, 等. First Calibration Results of Jason-2 and Saral/AltiKa Satellite Altimeters from the Qianliyan Permanent Facilities[J]. Advances in Space Research, 2017, 59(12): 2831–2842. DOI:<a href="https://doi.org/10.1016/j.asr.2017.02.044" target="_blank" rel="noopener">https://doi.org/10.1016/j.asr.2017.02.044</a>.<br>[3]YANG L, XU Y, ZHOU X, 等. Calibration of an Airborne Interferometric Radar Altimeter over the Qingdao Coast Sea, China[J]. Remote Sensing, 2020, 12(10): 1651. DOI:10.3390/rs12101651.<br>[4]杨磊, 周兴华, 王朝阳, 等. 基于GNSS浮标和验潮资料的HY-2A卫星雷达高度计绝对定标[J]. 海洋学报, 2017, 39(1): 111–120.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://assz0a.coding-pages.com/2021/10/27/pygmt/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xingchi.jpg">
      <meta itemprop="name" content="Yang Lei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/27/pygmt/" class="post-title-link" itemprop="url">pygmt</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-27 21:10:45 / 修改时间：22:37:36" itemprop="dateCreated datePublished" datetime="2021-10-27T21:10:45+08:00">2021-10-27</time>
            </span>

          
            <span id="/2021/10/27/pygmt/" class="post-meta-item leancloud_visitors" data-flag-title="pygmt" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/10/27/pygmt/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/10/27/pygmt/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近学习了<code>GMT</code>的python库<code>pygmt</code>，感觉相当值得推荐。下面简单介绍安装和使用。</p>
<h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><p>基本的准备工作和安装步骤如下：</p>
<ul>
<li>安装<code>miniconda</code>；</li>
<li>安装<code>conda</code>加速器<code>mamba</code>，提高python库的安装速度（可选）；</li>
<li>安装<code>jupyter lab</code>（可选）;</li>
<li>安装<code>pygmt</code>;</li>
</ul>
<h2 id="miniconda"><a href="#miniconda" class="headerlink" title="miniconda"></a>miniconda</h2><p>Miniconda是一款小巧的python环境管理工具，其安装程序中包含conda软件包管理器和Python。一旦安装了Miniconda，就可以使用conda命令安装任何其他软件工具包并创建环境等。去官网<a href="https://conda.io/en/latest/miniconda.html" target="_blank" rel="noopener">https://conda.io/en/latest/miniconda.html</a> 下载安装包即可完成安装。</p>
<p>安装后，创建一个新的独立python环境(随便取名，此处为<code>gmt</code>)，以备pygmt的安装和调用：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">conda</span> <span class="string">create -n gmt python=3.9</span></span><br><span class="line"><span class="attr">conda</span> <span class="string">activate gmt</span></span><br></pre></td></tr></table></figure>

<h2 id="mamba"><a href="#mamba" class="headerlink" title="mamba"></a>mamba</h2><p>虽然conda是个安装软件的神器，但镜像不稳定，下载安装软件的速度有时很慢。对于几十Mb甚至上百Mb的软件往往下不动，下了半天可能失败。特别是安装的软件多了后，对软件依赖关系的解析时间特别长。mamba加速神器，可以用来并行下载和安装，大大加快速度，减少失败几率。</p>
<p>首先，mamba本身需要先通过conda来安装：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="keyword">install</span> -c conda-forge mamba</span><br></pre></td></tr></table></figure>
<p>mamba安装成功后，后续所有软件安装都可将conda替换为mamba了。</p>
<h2 id="jupyter-lab"><a href="#jupyter-lab" class="headerlink" title="jupyter lab"></a>jupyter lab</h2><p>JupyterLab是Jupyter主打的最新数据科学生产工具，作为一种基于web的集成开发环境，你可以使用它编写notebook、操作终端、编辑markdown文本、打开交互模式、查看csv文件及图片等功能。pygmt对jupyter lab有很好的衔接，可以方便的查看和记录中间过程，显示绘图结果。安装命令为：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mamba <span class="keyword">install</span> -c conda-forge jupyterlab</span><br></pre></td></tr></table></figure>

<h2 id="pygmt"><a href="#pygmt" class="headerlink" title="pygmt"></a>pygmt</h2><p>pygmt可以在python中直接使用GMT进行数据处理和绘图，实现了和python的交互操作。下面命令将自动安装pygmt以及依赖，包括<code>proj,gdal,netcdf</code>等：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mamba <span class="keyword">install</span> -c conda-forge pygmt</span><br></pre></td></tr></table></figure>

<p>在命令栏输入<code>jupyter lab</code>，启动<code>jupyter lab</code>，新建一个lab，查看版本并绘制一个简单的例子：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import pygmt</span><br><span class="line">pygmt.show_versions()</span><br><span class="line"></span><br><span class="line">fig = pygmt.Figure()</span><br><span class="line">fig.coast(<span class="attribute">region</span>=<span class="string">"g"</span>, <span class="attribute">frame</span>=<span class="literal">True</span>, <span class="attribute">shorelines</span>=1)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/images/pygmt/g.png" alt></p>
<h2 id="遥感影像绘制"><a href="#遥感影像绘制" class="headerlink" title="遥感影像绘制"></a>遥感影像绘制</h2><p>遥感影像绘制不是GMT常用的功能，因此疑问也较多，这里从遥感数据的下载、格式转换、拉伸、裁剪，到最终绘制，给出完整的步骤。</p>
<h3 id="数据下载"><a href="#数据下载" class="headerlink" title="数据下载"></a>数据下载</h3><p>免费下载worldview开放数据：<a href="https://www.maxar.com/open-data/" target="_blank" rel="noopener">https://www.maxar.com/open-data/</a> 。<br>本例子采用数据土耳其地震影像（<a href="https://www.maxar.com/open-data/turkey-earthquake）" target="_blank" rel="noopener">https://www.maxar.com/open-data/turkey-earthquake）</a> 。</p>
<p>使用GMT查看影像信息：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!gmt grdinfo <span class="number">10300500</span>A4F8E700.tif</span><br><span class="line"># 分辨率约为<span class="number">4.32089651661e-06</span>*<span class="number">120000</span>=<span class="number">0.5</span>m</span><br></pre></td></tr></table></figure>
<blockquote>
<p>10300500A4F8E700.tif: Title: Grid imported via GDAL<br>10300500A4F8E700.tif: Command:<br>10300500A4F8E700.tif: Remark:<br>10300500A4F8E700.tif: Pixel node registration used [Geographic grid]<br>10300500A4F8E700.tif: Grid file format: gd = Import/export through GDAL<br>10300500A4F8E700.tif: x_min: 26.8895518746 x_max: 27.0835860536 x_inc: 4.32089651661e-06 name: x n_columns: 44906<br>10300500A4F8E700.tif: y_min: 37.6434216334 y_max: 37.8210061593 y_inc: 4.32089651661e-06 name: y n_rows: 41099<br>10300500A4F8E700.tif: v_min: 0 v_max: 229 name: z<br>10300500A4F8E700.tif: scale_factor: 1 add_offset: 0<br>+proj=longlat +datum=WGS84 +no_defs</p>
</blockquote>
<p>或者也可以使用gdal查看：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">print</span>(<span class="string">"GDAL info"</span>)</span><br><span class="line"><span class="comment"># 使用gdal查看</span></span><br><span class="line">!gdalinfo 10300500A4F8E700.tif</span><br></pre></td></tr></table></figure>
<blockquote>
<p>信息略</p>
</blockquote>
<p>或者也可以使用pygmt.grdinfo查看,不过格式不太美观，没有换行：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">pygmt</span><span class="selector-class">.grdinfo</span>("10300500<span class="selector-tag">A4F8E700</span><span class="selector-class">.tif</span>")</span><br></pre></td></tr></table></figure>
<blockquote>
<p>信息略</p>
</blockquote>
<h3 id="降低影像分辨率"><a href="#降低影像分辨率" class="headerlink" title="降低影像分辨率"></a>降低影像分辨率</h3><p>降低分辨率为9m（0.000075*120000=9m），并改为Byte格式（GMT不识别TIF的float32格式）:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!gdal_translate -tr <span class="number">0.000075</span> <span class="number">0.000075</span> -r average -ot Byte  <span class="number">10300500</span>A4F8E700.tif <span class="number">10300500</span>A4F8E700_lowbyte.tif</span><br></pre></td></tr></table></figure>
<p>这里的<code>gdal</code>程序应该可以在安装pygmt之后可以自动调佣，因为同时已经安装了gdal依赖，并创建了这些可执行文件。</p>
<h3 id="绘图"><a href="#绘图" class="headerlink" title="绘图"></a>绘图</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fig = pygmt.Figure()</span><br><span class="line"></span><br><span class="line"><span class="attribute">data</span>=<span class="string">"10300500A4F8E700_lowbyte.tif+b0,1,2"</span></span><br><span class="line"></span><br><span class="line">fig.grdimage(</span><br><span class="line">    <span class="attribute">grid</span>=data,</span><br><span class="line">    frame=[<span class="string">"af"</span>],</span><br><span class="line">    <span class="attribute">projection</span>=<span class="string">"M6.5i"</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/pygmt/test0.png" alt></p>
<h3 id="色调"><a href="#色调" class="headerlink" title="色调"></a>色调</h3><p>如果喜欢亮色，可以适当拉伸灰度值：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!gdal_translate -tr <span class="number">0.000075</span> <span class="number">0.000075</span> -scale <span class="number">0</span> <span class="number">200</span> <span class="number">0</span> <span class="number">255</span> -r average -ot Byte  <span class="number">10300500</span>A4F8E700.tif <span class="number">10300500</span>A4F8E700_lowbyte2.tif</span><br></pre></td></tr></table></figure>
<p>重复<code>绘图</code>的代码，效果：<br><img src="/images/pygmt/test4.png" alt></p>
<h3 id="局部"><a href="#局部" class="headerlink" title="局部"></a>局部</h3><p>为了保持清晰，局部绘图使用原始分辨率。为了防止图像过大，处理时间长，将裁剪成小区域绘图，并转格式和拉伸：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!gdalwarp  -te <span class="number">26.966</span> <span class="number">37.7</span> <span class="number">27.0</span> <span class="number">37.7166</span> <span class="number">10300500</span>A4F8E700.tif <span class="number">10300500</span>A4F8E700_small.tif</span><br><span class="line">!gdal_translate -scale <span class="number">0</span> <span class="number">200</span> <span class="number">0</span> <span class="number">255</span> -r average -ot Byte  <span class="number">10300500</span>A4F8E700_small.tif <span class="number">10300500</span>A4F8E700_lowbyte4.tif</span><br></pre></td></tr></table></figure>
<p>重复<code>绘图</code>的代码：<br><img src="/images/pygmt/test.png" alt></p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li>遥感影像一般为底图，在此基础上可以使用pygmt任意添加<code>点、线、面、文字</code>等要素，除了可以识别文本格式，它已经可以读取<code>shp</code>格式。</li>
<li>导出的最终图的格式可以通过后缀修改。比如可以导出高清pdf图片，方便的插入latex使用。</li>
<li>本例使用的遥感影像已经转为经纬度坐标，无需再次转换坐标。如果是UTM，则可以通过gdal快速转换。</li>
<li>本例子未展示地震前后对比，大家可以下载数据后自行对比。</li>
</ul>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>可以下载本例子的jupyter 版本：<a href="https://www.jianguoyun.com/p/DY8Q0ugQ2PCQBxjvv5cE" target="_blank" rel="noopener">https://www.jianguoyun.com/p/DY8Q0ugQ2PCQBxjvv5cE</a> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://assz0a.coding-pages.com/2021/10/22/tensorflowGPU/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xingchi.jpg">
      <meta itemprop="name" content="Yang Lei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/22/tensorflowGPU/" class="post-title-link" itemprop="url">TensorFlow GPU 在Ubuntu 18.04的安装</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-22 08:46:27" itemprop="dateCreated datePublished" datetime="2021-10-22T08:46:27+08:00">2021-10-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-31 15:02:03" itemprop="dateModified" datetime="2022-08-31T15:02:03+08:00">2022-08-31</time>
              </span>

          
            <span id="/2021/10/22/tensorflowGPU/" class="post-meta-item leancloud_visitors" data-flag-title="TensorFlow GPU 在Ubuntu 18.04的安装" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/10/22/tensorflowGPU/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/10/22/tensorflowGPU/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在Ubuntu上安装TensorFlow GPU版本，首先需要：</p>
<ul>
<li>一张NVIDIA GPU显卡和Ubuntu系统；</li>
<li>NVIDIA 显卡驱动，最新为<code>495.29.05</code>（2021年10月22日）；</li>
<li>CUDA toolkit；</li>
<li>cudNN SDK；</li>
<li>CUPTI；</li>
<li>TensorFlow作为深度学习的框架。</li>
</ul>
<p>以NVIDIA 2080ti为例，安装步骤如下：</p>
<h3 id="安装-NVIDIA-显卡驱动"><a href="#安装-NVIDIA-显卡驱动" class="headerlink" title="安装 NVIDIA 显卡驱动"></a>安装 NVIDIA 显卡驱动</h3><p>在官网：<a href="https://www.nvidia.com/download/index.aspx?lang=en-us" target="_blank" rel="noopener">https://www.nvidia.com/download/index.aspx?lang=en-us</a> 下载最新的显卡驱动。<br><img src="/images/gpu/driver.png" alt></p>
<p>完成后运行<code>nvidia-smi</code>，查看显卡信息：<br><img src="/images/gpu/smi.png" alt></p>
<p>正常显示则表示驱动安装成功。</p>
<blockquote>
<p>Ubuntu初次插入GPU显卡后会自动安装驱动，也能正常使用显卡，但是版本可能较低，和TensorFlow的GPU需求不匹配。<strong>也可以通过Ubuntu自带的驱动更新来安装显卡最新的驱动</strong>。</p>
</blockquote>
<h3 id="CUDA-toolkit"><a href="#CUDA-toolkit" class="headerlink" title="CUDA toolkit"></a>CUDA toolkit</h3><p>去谷歌网站查看版本匹配，确定TensorFlow、cuda toolkit、和cuDNN的版本对应正确。<br><img src="/images/gpu/toolkit.png" alt></p>
<p>以TensorFlow2.5为例，需要的cuDNN8.1和CUDA 11.2。</p>
<blockquote>
<p>注意这个CUDA 11.2不是驱动的版本，可以和上面的显卡驱动显示的<code>11.5</code>不一致。<br><img src="/images/gpu/toolkit2.png" alt></p>
</blockquote>
<p>下载：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="comment">//developer.download.nvidia.com/compute/cuda/11.2.2/local_installers/cuda_11.2.2_460.32.03_linux.run</span></span><br><span class="line">sudo chmod +x cuda_11<span class="number">.2</span><span class="number">.2</span>_460<span class="number">.32</span><span class="number">.03</span>_linux.run</span><br><span class="line">sudo ./cuda_11<span class="number">.2</span><span class="number">.2</span>_460<span class="number">.32</span><span class="number">.03</span>_linux.run</span><br></pre></td></tr></table></figure>
<h4 id="坑-1"><a href="#坑-1" class="headerlink" title="坑-1"></a>坑-1</h4><blockquote>
<p>cuda toolkit包中含有了显卡驱动，因为之前已安装，这里不要再安装，否则显卡驱动冲突。</p>
</blockquote>
<p>此处可参考：<a href="https://zhuanlan.zhihu.com/p/122286055" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/122286055</a><br><img src="/images/gpu/ken1.jpg" alt></p>
<p>去掉driver前面的X，执行install，等一会安装成功。</p>
<h4 id="添加到路径"><a href="#添加到路径" class="headerlink" title="添加到路径"></a>添加到路径</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit ~/.bashrc</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="string">"/usr/local/cuda-11.2/bin:<span class="variable">$PATH</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LD_LIBRARY_PATH</span>=<span class="string">"/usr/local/cuda-11.2/lib64:<span class="variable">$LD_LIBRARY_PATH</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">CUDA_HOME</span>=/usr/local/cuda-11.2</span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>

<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nvcc -V</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/gpu/nvcc.jpg" alt></p>
<h3 id="cuDNN"><a href="#cuDNN" class="headerlink" title="cuDNN"></a>cuDNN</h3><p>从官网（<a href="https://developer.nvidia.com/rdp/cudnn-download）" target="_blank" rel="noopener">https://developer.nvidia.com/rdp/cudnn-download）</a> 下载cuDNN。先注册，然后找到对应的8.1版本，并下载deb版本。</p>
<p>可参考：<a href="https://zhuanlan.zhihu.com/p/126997172" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/126997172</a></p>
<p><img src="/images/gpu/cudnn.png" alt></p>
<p>下载内容为：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">libcudnn8_8<span class="number">.1</span><span class="number">.1</span><span class="number">.33</span><span class="number">-1</span>+cuda11<span class="number">.2</span>_amd64.deb</span><br><span class="line">libcudnn8-dev_8<span class="number">.1</span><span class="number">.1</span><span class="number">.33</span><span class="number">-1</span>+cuda11<span class="number">.2</span>_amd64.deb</span><br><span class="line">libcudnn8-samples_8<span class="number">.1</span><span class="number">.1</span><span class="number">.33</span><span class="number">-1</span>+cuda11<span class="number">.2</span>_amd64.deb</span><br></pre></td></tr></table></figure>

<p>依次安装：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i llibcudnn8_8<span class="number">.1</span><span class="number">.1</span><span class="number">.33</span><span class="number">-1</span>+cuda11<span class="number">.2</span>_amd64.deb</span><br><span class="line">sudo dpkg -i libcudnn8-dev_8<span class="number">.1</span><span class="number">.1</span><span class="number">.33</span><span class="number">-1</span>+cuda11<span class="number">.2</span>_amd64.deb</span><br><span class="line">sudo dpkg -i libcudnn8-samples_8<span class="number">.1</span><span class="number">.1</span><span class="number">.33</span><span class="number">-1</span>+cuda11<span class="number">.2</span>_amd64.deb</span><br></pre></td></tr></table></figure>

<blockquote>
<p>对于新版的cuda，如11.6，cudnn只提供了一个文件。可以使用如下方法安装：</p>
</blockquote>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Procedure</span></span><br><span class="line"><span class="comment"># Navigate to your &lt;cudnnpath&gt; directory containing the cuDNN tar file.</span></span><br><span class="line"><span class="comment"># Unzip the cuDNN package.</span></span><br><span class="line">$ tar -xvf cudnn-linux-x86_64-<span class="number">8</span>.x.x.x_cudaX.Y-archive.tar.xz</span><br><span class="line"><span class="comment"># Copy the following files into the CUDA toolkit directory.</span></span><br><span class="line">$ sudo cp cudnn-*-archive/<span class="keyword">include</span>/cudnn*.h /usr/local/cuda/<span class="keyword">include</span> </span><br><span class="line">$ sudo cp -P cudnn-*-archive/<span class="class"><span class="keyword">lib</span>/<span class="title">libcudnn</span>* /<span class="title">usr</span>/<span class="title">local</span>/<span class="title">cuda</span>/<span class="title">lib64</span> </span></span><br><span class="line">$ sudo chmod a+r /usr/local/cuda/<span class="keyword">include</span>/cudnn*.h /usr/local/cuda/lib64/libcudnn*</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参考：<a href="https://blog.csdn.net/P081513083/article/details/126324723" target="_blank" rel="noopener">https://blog.csdn.net/P081513083/article/details/126324723</a></p>
</blockquote>
<h4 id="测试cuDNN"><a href="#测试cuDNN" class="headerlink" title="测试cuDNN"></a>测试cuDNN</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cp -r <span class="regexp">/usr/</span>src<span class="regexp">/cudnn_samples_v8/</span> <span class="variable">$HOME</span></span><br><span class="line">cd  ~<span class="regexp">/cudnn_samples_v8/m</span>nistCUDNN</span><br><span class="line">sudo make clean </span><br><span class="line">sudo make</span><br></pre></td></tr></table></figure>

<p>遇到错误：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">test</span>.c:1:10: fatal <span class="keyword">error</span>: FreeImage.<span class="keyword">h</span>: <span class="keyword">No</span> such <span class="keyword">file</span> or directory</span><br><span class="line">     1 | #<span class="keyword">include</span> <span class="string">"FreeImage.h"</span></span><br></pre></td></tr></table></figure>

<p>解决方法：</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install libfreeimage3 libfreeimage-<span class="built_in">dev</span></span><br></pre></td></tr></table></figure>

<p>进行测试：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="string">./mnistCUDNN</span></span><br></pre></td></tr></table></figure>
<p>显示<code>Test passed!</code>。</p>
<h3 id="CUPTI"><a href="#CUPTI" class="headerlink" title="CUPTI"></a>CUPTI</h3><p>该程序没有约定版本，直接通过<code>apt</code>安装。</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install libcupti-<span class="built_in">dev</span></span><br></pre></td></tr></table></figure>
<p>并编辑<code>~/.bashrc</code>添加到路径。</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span><span class="symbol">:/usr/local/cuda/extras/CUPTI/lib64</span></span><br></pre></td></tr></table></figure>

<h3 id="Tensorflow"><a href="#Tensorflow" class="headerlink" title="Tensorflow"></a>Tensorflow</h3><h4 id="坑2"><a href="#坑2" class="headerlink" title="坑2"></a>坑2</h4><blockquote>
<p>不要使用conda安装，使用pip安装。</p>
</blockquote>
<p>使用conda反复安装TensorFlow，总是无法调用GPU，后来使用pip安装（也是官方教程的方法）发现安装包要比conda的包大一倍。</p>
<p>使用下面的命令测试：</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br></pre></td></tr></table></figure>
<p>会出现<code>Successfully opened dynamic library libcudart.so.11.0</code>，表示成功。</p>
<p>接着使用</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tf</span><span class="selector-class">.config</span><span class="selector-class">.list_physical_devices</span>(<span class="string">'GPU'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/images/gpu/finish.png" alt></p>
<p>至此，安装成功。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://medium.com/analytics-vidhya/configure-tensorflow-gpu-with-ubuntu-18-04-2021-update-aee264e887ae" target="_blank" rel="noopener">https://medium.com/analytics-vidhya/configure-tensorflow-gpu-with-ubuntu-18-04-2021-update-aee264e887ae</a><br><a href="https://www.bilibili.com/read/cv9164113" target="_blank" rel="noopener">https://www.bilibili.com/read/cv9164113</a><br><a href="https://towardsdatascience.com/installing-tensorflow-gpu-in-ubuntu-20-04-4ee3ca4cb75d" target="_blank" rel="noopener">https://towardsdatascience.com/installing-tensorflow-gpu-in-ubuntu-20-04-4ee3ca4cb75d</a><br><a href="https://zhuanlan.zhihu.com/p/122286055" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/122286055</a><br><a href="https://zhuanlan.zhihu.com/p/126997172" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/126997172</a><br><a href="https://www.tensorflow.org/install/source#gpu" target="_blank" rel="noopener">https://www.tensorflow.org/install/source#gpu</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://assz0a.coding-pages.com/2021/09/04/gmt-trend/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xingchi.jpg">
      <meta itemprop="name" content="Yang Lei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/04/gmt-trend/" class="post-title-link" itemprop="url">使用GMT计算二维网格数据的均值、标准差和趋势</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-09-04 17:39:55 / 修改时间：18:37:52" itemprop="dateCreated datePublished" datetime="2021-09-04T17:39:55+08:00">2021-09-04</time>
            </span>

          
            <span id="/2021/09/04/gmt-trend/" class="post-meta-item leancloud_visitors" data-flag-title="使用GMT计算二维网格数据的均值、标准差和趋势" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/09/04/gmt-trend/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/09/04/gmt-trend/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>下面介绍GMT中<code>blockmean</code>和<code>grdmath</code>的统计计算功能，包含均值、标准差和趋势。</p>
<h2 id="案例：高度计大气湿延迟的中国周边海域分布"><a href="#案例：高度计大气湿延迟的中国周边海域分布" class="headerlink" title="案例：高度计大气湿延迟的中国周边海域分布"></a>案例：高度计大气湿延迟的中国周边海域分布</h2><p>以中国周边海域的高度计湿延迟为例，计算湿延迟的空间均值、标准差和趋势。</p>
<h2 id="code"><a href="#code" class="headerlink" title="code"></a>code</h2><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">REM             GMT EXAMPLE xxxx</span></span><br><span class="line"><span class="comment">REM             2021-03-14 leiyang@fio.org.cn</span></span><br><span class="line"><span class="comment">REM Purpose:    Using blockmean, grdmath to calculate the STD abd trend </span></span><br><span class="line"><span class="comment">REM</span></span><br><span class="line">gmt gmtset FORMAT_GEO_MAP = dddF MAP_FRAME_WIDTH=<span class="number">2</span>p</span><br><span class="line">gmt gmtset FONT_ANNOT_PRIMARY <span class="number">7</span>p,Helvetica,black FONT_LABEL <span class="number">7</span>p,Helvetica,black </span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> ps=jason_wet_global_new.ps</span><br><span class="line"><span class="built_in">set</span> R=<span class="number">105</span>/<span class="number">130</span>/<span class="number">15</span>/<span class="number">45</span></span><br><span class="line"><span class="built_in">set</span> J=M5c</span><br><span class="line"></span><br><span class="line"><span class="comment">REM Calculate mean value and plot mean wet path delay</span></span><br><span class="line">gmt makecpt -Cvik -T50/<span class="number">350</span>/<span class="number">5</span>&gt; t.cpt</span><br><span class="line"><span class="comment">REM use Jason-2 data of cycle 1-294 (6years), downloaded from RADS.</span></span><br><span class="line"><span class="comment">rem gawk "!/NaN/ &amp;&amp; NR&gt;13 &amp;&amp; $3&gt;100 &#123;print $3,$2,(-$4)*1000&#125;" D:\rads\wet\radsdata_ok\j2*c*.asc &gt; model.dd</span></span><br><span class="line">gmt blockmean model.dd -R<span class="variable">%R%</span> -I20m &gt;tmp_.dd</span><br><span class="line">gmt surface tmp_.dd -R<span class="variable">%R%</span> -I20m -Ggridded2_j2_s.nc -T0.<span class="number">25</span></span><br><span class="line"><span class="comment">REM gridded2_j2_s.nc is the averaged file and will be used in next step.</span></span><br><span class="line">gmt grdimage gridded2_j2_s.nc -R<span class="variable">%R%</span> -J<span class="variable">%J%</span> -K -Ct.cpt -Y13c&gt; <span class="variable">%ps%</span></span><br><span class="line">gmt pscoast -R -J -Dl -A10000/<span class="number">0</span>/<span class="number">1</span> -Bag --FONT_TITLE=<span class="number">10</span>p -Gwhite -W0.<span class="number">1</span>p --MAP_ANNOT_OBLIQUE=<span class="number">45</span> -O -K &gt;&gt; <span class="variable">%ps%</span></span><br><span class="line">gmt psscale -DjBC+o0c/-<span class="number">1</span>.<span class="number">4</span>c+w1.<span class="number">5</span>i/<span class="number">0</span>.<span class="number">08</span>i -R -J -Ct.cpt -Bxaf -By+lmm -I -O  --FONT_ANNOT_PRIMARY=<span class="number">7</span>p -K&gt;&gt; <span class="variable">%ps%</span></span><br><span class="line"><span class="built_in">echo</span>  <span class="number">107</span> <span class="number">42</span> a)mean of WPD|  gmt pstext -F+f8p,<span class="number">1</span>,black+jLB -R -J -O -N  -Gwhite -K &gt;&gt;  <span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">rem Calculate STD and PLOT</span></span><br><span class="line">gmt makecpt -Cvik -T50/<span class="number">150</span>/<span class="number">1</span>&gt; t.cpt</span><br><span class="line">gmt blockmean model.dd -As -E -R -I20m -Ggridded2_j2_std.nc</span><br><span class="line">gmt grd2xyz gridded2_j2_std.nc | gawk "!/NaN/ &#123;<span class="built_in">print</span> $<span class="number">1</span>,$<span class="number">2</span>,$<span class="number">3</span>&#125;" | gmt surface -R -I20m -Ggridded2_j2_std2.nc -T0.<span class="number">25</span></span><br><span class="line"><span class="comment">REM gridded2_j2_std2.nc is the STD file and will be used in next step.</span></span><br><span class="line">gmt grdimage gridded2_j2_std2.nc -R -J -K -Ct.cpt -O  -X7c &gt;&gt; <span class="variable">%ps%</span></span><br><span class="line">gmt pscoast -R -J -Dl -A10000/<span class="number">0</span>/<span class="number">1</span> -Bag --FONT_TITLE=<span class="number">10</span>p -Gwhite -W0.<span class="number">1</span>p --MAP_ANNOT_OBLIQUE=<span class="number">45</span> -O -K &gt;&gt; <span class="variable">%ps%</span></span><br><span class="line">gmt psscale -DjBC+o0c/-<span class="number">1</span>.<span class="number">4</span>c+w1.<span class="number">5</span>i/<span class="number">0</span>.<span class="number">08</span>i -R -J -Ct.cpt -Bxaf -By+lmm -I -O  --FONT_ANNOT_PRIMARY=<span class="number">7</span>p -K&gt;&gt; <span class="variable">%ps%</span></span><br><span class="line"><span class="built_in">echo</span>  <span class="number">107</span> <span class="number">42</span> b)STD of WPD|  gmt pstext -F+f8p,<span class="number">1</span>,black+jLB -R -J -O -N -K -Gwhite &gt;&gt;  <span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">rem Calculate trend and PLOT</span></span><br><span class="line">gmt makecpt -Cvik -T-<span class="number">30</span>/<span class="number">30</span>/<span class="number">1</span>&gt; t.cpt</span><br><span class="line">gmt grdsample gridded2_j2_s.nc -I60m -Ggridded2_j2_s_re.nc</span><br><span class="line"></span><br><span class="line">gmt grdmath gridded2_j2_s_re.nc  DDY = slope2.nc</span><br><span class="line">gmt grdmath gridded2_j2_s_re.nc  DDX = slope3.nc</span><br><span class="line">gmt grdmath gridded2_j2_s_re.nc  D2DY2 = slope1.nc</span><br><span class="line"></span><br><span class="line">gmt grdimage slope2.nc -R -J -K -Ct.cpt -O  -X-<span class="number">7</span>c -Y-<span class="number">10</span>c&gt;&gt; <span class="variable">%ps%</span></span><br><span class="line">gmt pscoast -R -J -Dl -A10000/<span class="number">0</span>/<span class="number">1</span> -Bag --FONT_TITLE=<span class="number">10</span>p -Gwhite -W0.<span class="number">1</span>p --MAP_ANNOT_OBLIQUE=<span class="number">45</span> -O -K &gt;&gt; <span class="variable">%ps%</span></span><br><span class="line">gmt psscale -DjBC+o0c/-<span class="number">1</span>.<span class="number">4</span>c+w1.<span class="number">5</span>i/<span class="number">0</span>.<span class="number">08</span>i -R -J -Ct.cpt -Bxaf -By+lmm/@. -I -O  --FONT_ANNOT_PRIMARY=<span class="number">7</span>p -K&gt;&gt; <span class="variable">%ps%</span></span><br><span class="line"><span class="built_in">echo</span>  <span class="number">107</span> <span class="number">42</span> c)trend of WPD|  gmt pstext -F+f8p,<span class="number">1</span>,black+jLB -R -J -O -N -Gwhite -K &gt;&gt;  <span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line">gmt grdimage slope3.nc -R -J -K -Ct.cpt -O  -X7c &gt;&gt; <span class="variable">%ps%</span></span><br><span class="line">gmt pscoast -R -J -Dl -A10000/<span class="number">0</span>/<span class="number">1</span> -Bag --FONT_TITLE=<span class="number">10</span>p -Gwhite -W0.<span class="number">1</span>p --MAP_ANNOT_OBLIQUE=<span class="number">45</span> -O -K &gt;&gt; <span class="variable">%ps%</span></span><br><span class="line">gmt psscale -DjBC+o0c/-<span class="number">1</span>.<span class="number">4</span>c+w1.<span class="number">5</span>i/<span class="number">0</span>.<span class="number">08</span>i -R -J -Ct.cpt -Bxaf -By+lmm/@. -I -O  --FONT_ANNOT_PRIMARY=<span class="number">7</span>p -K&gt;&gt; <span class="variable">%ps%</span></span><br><span class="line"><span class="built_in">echo</span>  <span class="number">107</span> <span class="number">42</span> d)trend of WPD|  gmt pstext -F+f8p,<span class="number">1</span>,black+jLB -R -J -O -N -Gwhite &gt;&gt;  <span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line">gmt psconvert <span class="variable">%ps%</span>  -A -P -Tf</span><br></pre></td></tr></table></figure>

<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p><img src="/images/jason_wet_global_new.png" alt></p>
<p>大气湿延迟和大气水汽和液态云有关，均值呈现出南高北低的自然特征。在北纬25-35度之间，时间变化（STD）最为剧烈，说明这段区间可能四季分明，不过度干燥，不过分潮湿，适合人类居住（xia che）。变化趋势图表示南北和东西方向一度距离上湿延迟的变化，因为网格的空间单位是度，所以这里一阶导数结果表示一度空间距离上的湿延迟变化量。</p>
<h2 id="要点"><a href="#要点" class="headerlink" title="要点"></a>要点</h2><p><code>blockmean model.dd -As -E</code>中的<code>-As</code>设置输出为<code>STD</code>。如果不做设置，默认输出的是均值。</p>
<p><code>gmt grdmath gridded2_j2_s_re.nc  DDY = slope2.nc</code>中的<code>DDY</code>或者<code>DDX</code>设置一个固定方向的一阶导数计算，因为网格被提前预设为1度，因此计算结果是1度距离上的变化率。<code>grdmath</code>也可以计算二阶导数，使用<code>D2DY2</code>或者<code>D2DX2</code>。</p>
<h2 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h2><p>可以直接小编从RADS数据库中提取的文件model.dd，它是 Jason-2 cycle 1-294的全部模型湿延迟原始数据汇总：<br>model.dd： <a href="https://www.jianguoyun.com/p/DWQl1jsQ2PCQBxjWsYwE" target="_blank" rel="noopener">https://www.jianguoyun.com/p/DWQl1jsQ2PCQBxjWsYwE</a> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://assz0a.coding-pages.com/2021/08/18/distance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xingchi.jpg">
      <meta itemprop="name" content="Yang Lei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/18/distance/" class="post-title-link" itemprop="url">GMT的海岸线空间数据分析功能</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-18 21:27:35" itemprop="dateCreated datePublished" datetime="2021-08-18T21:27:35+08:00">2021-08-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-08-20 21:44:11" itemprop="dateModified" datetime="2021-08-20T21:44:11+08:00">2021-08-20</time>
              </span>

          
            <span id="/2021/08/18/distance/" class="post-meta-item leancloud_visitors" data-flag-title="GMT的海岸线空间数据分析功能" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/08/18/distance/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/08/18/distance/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>下面介绍：使用GMT和海岸线数据绘任意距离的海岸延伸线（如12海里线等）；使用海岸线距离进行站点数据的筛选（如提取沿海50km以内的GNSS点位）。</p>
<h2 id="根据离岸的距离对GNSS站点进行提取"><a href="#根据离岸的距离对GNSS站点进行提取" class="headerlink" title="根据离岸的距离对GNSS站点进行提取"></a>根据离岸的距离对GNSS站点进行提取</h2><p>在利用GNSS水汽对卫星高度计进行湿延迟评估时，需要提取距离海岸线小于50km的站点做比对。这里我们使用GMT快速分析提取数据并绘图展示。</p>
<p>绘图采用的数据主要是中国地震局陆态网、IGS和自然资源部沿海业务化GNSS系统，卫星数据主要是我国的海洋二号以及国外的Jason，绘图数据见文末链接。</p>
<blockquote>
<p>中国陆态网数据和国际IGS数据为共享开放资料。由于政策原因，沿海业务化GNSS资料暂未公开。海洋二号高度计资料和国外高度计资料已全面开放共享。</p>
</blockquote>
<p>绘图任务主要步骤总结为：</p>
<ul>
<li><code>grdmath</code>的<code>LDISTG</code>计算网格点到<code>GSHHG</code>岸线的距离，生成网格文件；</li>
<li><code>grdlandmask</code>分离陆海；</li>
<li><code>grdcontour</code>提取某值的等值线；</li>
<li><code>select</code>依据点位到某等值线的距离筛选站点。</li>
</ul>
<h4 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h4><p>下面是windows下的代码：</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">REM             GMT EXAMPLE xxxx</span></span><br><span class="line"><span class="comment">REM             2019-04-14 leiyang@fio.org.cn</span></span><br><span class="line"><span class="comment">REM Purpose:    Using grdmath to show the distance from GSHHG  coastline data</span></span><br><span class="line"><span class="comment">REM</span></span><br><span class="line">gmt gmtset FORMAT_GEO_MAP = dddF MAP_FRAME_WIDTH=<span class="number">2</span>p</span><br><span class="line">gmt gmtset FONT_ANNOT_PRIMARY <span class="number">7</span>p,Helvetica,black FONT_LABEL <span class="number">7</span>p,Helvetica,black </span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> ps=wet.ps</span><br><span class="line"></span><br><span class="line">gmt grdmath -R100/<span class="number">140</span>/<span class="number">15</span>/<span class="number">45</span> -A1000000/<span class="number">0</span>/<span class="number">4</span> -Dc -I10m LDISTG = dist_to_gshhg.nc</span><br><span class="line">gmt grdlandmask -R -Dl -I10m -N1/-<span class="number">1</span> -Gland_mask.nc -V</span><br><span class="line">gmt grdmath dist_to_gshhg.nc land_mask.nc MUL = file.nc</span><br><span class="line">gmt grdsample dist_to_gshhg.nc -R100/<span class="number">140</span>/<span class="number">15</span>/<span class="number">45</span> -I1m -Gfile2.nc</span><br><span class="line"><span class="comment">REM Outut 50km coordinates.</span></span><br><span class="line">gmt grdcontour file2.nc -JM4.<span class="number">5</span>i -R100/<span class="number">140</span>/<span class="number">15</span>/<span class="number">45</span> -C50, -D &gt; out.d50</span><br><span class="line">gmt makecpt -Ccopper -T-<span class="number">0</span>/<span class="number">50</span>/<span class="number">1</span>&gt; t.cpt</span><br><span class="line"></span><br><span class="line">gmt grdimage file2.nc -JM4.<span class="number">5</span>i -R100/<span class="number">130</span>/<span class="number">15</span>/<span class="number">45</span> -P -K -Ct.cpt -t80&gt; <span class="variable">%ps%</span></span><br><span class="line">gmt psxy -R -J out.d50 -W0.<span class="number">4</span>p,green -O -K &gt;&gt;<span class="variable">%ps%</span></span><br><span class="line">gmt pscoast -R -JM4.<span class="number">5</span>i -Dl -A10000/<span class="number">0</span>/<span class="number">1</span> -B5g5 --FONT_TITLE=<span class="number">10</span>p -K -Swhite -W0.<span class="number">1</span>p --MAP_ANNOT_OBLIQUE=<span class="number">45</span> -O -N1&gt;&gt; <span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">REM Begin the sites selection.</span></span><br><span class="line">gmt pscoast -R -M -W -Dc -A10000&gt; coastal.txt</span><br><span class="line">gmt select trc.dat -Lcoastal.txt+d50k -fg &gt; subset.d2</span><br><span class="line"></span><br><span class="line"><span class="comment">REM satellite tracks</span></span><br><span class="line">gmt psxy -R -J ja.dat -W1p,black -O -K -t80&gt;&gt;<span class="variable">%ps%</span></span><br><span class="line">gmt psxy -R -J hy2.dat -W1p,red -O -K -t80&gt;&gt;<span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">REM All CMONOC sites</span></span><br><span class="line">gmt psxy -R -J trc.dat -Sc0.<span class="number">1</span> -Gblack -O -K -t70 &gt;&gt;<span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">REM tide sites</span></span><br><span class="line">gawk "&#123;<span class="built_in">print</span> $<span class="number">3</span>, $<span class="number">4</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, $<span class="number">1</span>&#125;" yh_tide.txt2  &gt;temp.d</span><br><span class="line"><span class="comment">REM Coastal GNSS sites</span></span><br><span class="line">gawk "&#123;<span class="built_in">print</span> $<span class="number">1</span>, $<span class="number">2</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, $<span class="number">4</span>&#125;" gnss.txt &gt;temp.d01</span><br><span class="line">gmt psxy temp.d01  -R  -J  -K -O  -Gblack -St0.<span class="number">05</span>i -t70 &gt;&gt;<span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">REM Plot the selected sites </span></span><br><span class="line">gawk "&#123;<span class="built_in">print</span> $<span class="number">1</span>, $<span class="number">2</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, $<span class="number">4</span>&#125;" gnss2.txt | gmt psxy -R -J -O -Gred -Sc0.<span class="number">08</span>i -K&gt;&gt;<span class="variable">%ps%</span></span><br><span class="line">gmt psxy -R -J subset.d2 -Ss0.<span class="number">15</span> -GDEEPSKYBLUE1 -O -K&gt;&gt;<span class="variable">%ps%</span></span><br><span class="line">gmt psxy -R -J gnss3.txt -Ss0.<span class="number">2</span> -Gred -O -K&gt;&gt;<span class="variable">%ps%</span></span><br><span class="line">gmt psxy -R -J gnss3.txt -Ss0.<span class="number">12</span> -Gblue -O -K &gt;&gt;<span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="number">1</span>.<span class="number">2116450</span>e+<span class="number">02</span>,<span class="number">2</span>.<span class="number">4953600</span>e+<span class="number">01</span> | gmt psxy -R -J -Sa0.<span class="number">2</span> -Gblue -O -K&gt;&gt;<span class="variable">%ps%</span></span><br><span class="line"><span class="built_in">echo</span> <span class="number">118</span>.<span class="number">38</span>,<span class="number">24</span>.<span class="number">46</span>  | gmt psxy -R -J -Sa0.<span class="number">2</span> -Gblue -O -K&gt;&gt;<span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line">gawk "!/SDYT/ &amp;&amp; !/SDQD/ &#123;<span class="built_in">print</span> $<span class="number">1</span>, $<span class="number">2</span>, $<span class="number">3</span>&#125;" gnss3.txt | gmt pstext  -R -J -F+f7p,black+jTL -O -K -Gwhite -D0.<span class="number">2</span>/<span class="number">0</span>.<span class="number">1</span>&gt;&gt; <span class="variable">%ps%</span></span><br><span class="line">gawk "/SDYT/ || /SDQD/ &#123;<span class="built_in">print</span> $<span class="number">1</span>, $<span class="number">2</span>, $<span class="number">3</span>&#125;" gnss3.txt | gmt pstext  -R -J -F+f7p,black+jTL -O -K -Gwhite -D-<span class="number">0</span>.<span class="number">5</span>/<span class="number">0</span>.<span class="number">4</span>&gt;&gt; <span class="variable">%ps%</span></span><br><span class="line">gawk "&#123;<span class="built_in">print</span> $<span class="number">1</span>, $<span class="number">2</span>, $<span class="number">4</span>&#125;" gnss2.txt | gmt pstext -R -J -F+f7p,black+jTL -O -K -Gwhite -D0.<span class="number">2</span>/<span class="number">0</span>.<span class="number">1</span>&gt;&gt; <span class="variable">%ps%</span></span><br><span class="line"><span class="built_in">echo</span> <span class="number">1</span>.<span class="number">2116450</span>e+<span class="number">02</span>,<span class="number">2</span>.<span class="number">4953600</span>e+<span class="number">01</span>,TWTF | gmt pstext -R -J -F+f7p,black+jTL -O -K -Gwhite -D0.<span class="number">2</span>/<span class="number">0</span>.<span class="number">1</span>&gt;&gt; <span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">REM add legend</span></span><br><span class="line"><span class="built_in">echo</span> S <span class="number">0</span>.<span class="number">1</span>i c <span class="number">0</span>.<span class="number">05</span>c black <span class="number">1</span>p,black <span class="number">0</span>.<span class="number">3</span>i Total CMONOC &gt;le.d</span><br><span class="line"><span class="built_in">echo</span> S <span class="number">0</span>.<span class="number">1</span>i s <span class="number">0</span>.<span class="number">15</span>c DEEPSKYBLUE1 .<span class="number">7</span>p,DEEPSKYBLUE1 <span class="number">0</span>.<span class="number">3</span>i Coastal CMONOC &gt;&gt;le.d</span><br><span class="line"><span class="built_in">echo</span> S <span class="number">0</span>.<span class="number">1</span>i s <span class="number">0</span>.<span class="number">2</span>c blue <span class="number">0</span>.<span class="number">7</span>p,red <span class="number">0</span>.<span class="number">3</span>i Selected CMONOC &gt;&gt;le.d</span><br><span class="line"><span class="built_in">echo</span> S <span class="number">0</span>.<span class="number">1</span>i t <span class="number">0</span>.<span class="number">05</span>i gray - <span class="number">0</span>.<span class="number">3</span>i Costal CGN&gt;&gt;le.d</span><br><span class="line"><span class="built_in">echo</span> S <span class="number">0</span>.<span class="number">1</span>i c <span class="number">0</span>.<span class="number">08</span>i  red - <span class="number">0</span>.<span class="number">3</span>i Selected CGN &gt;&gt;le.d</span><br><span class="line"><span class="built_in">echo</span> S <span class="number">0</span>.<span class="number">1</span>i a <span class="number">0</span>.<span class="number">15</span>c blue <span class="number">0</span>.<span class="number">7</span>p,blue <span class="number">0</span>.<span class="number">3</span>i IGS &gt;&gt;le.d</span><br><span class="line">gmt pslegend -D+w1.<span class="number">6</span>i+jBL+o2.<span class="number">8</span>i/<span class="number">0</span>.<span class="number">2</span>i -R -J -O -F+p1p+gwhite --FONT_ANNOT_PRIMARY=<span class="number">7</span>p le.d &gt;&gt; <span class="variable">%ps%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">REM Creat kml file to be loaded in Google earth.</span></span><br><span class="line">gmt <span class="number">2</span>kml subset.d2 -Gred+f -<span class="built_in">Fs</span> &gt; mypoints.kml</span><br><span class="line"></span><br><span class="line">gmt psconvert <span class="variable">%ps%</span>  -A -P -Tf</span><br></pre></td></tr></table></figure>


<h2 id="200公里线绘制"><a href="#200公里线绘制" class="headerlink" title="200公里线绘制"></a>200公里线绘制</h2><p>使用GMT岸线绘制领海线、专属经济区等政治界线比较危险，因为上面的数据分析使用了低分辨率的岸线，并忽略了很多海岛。这里选择绘制距离大陆200km的等值线。</p>
<p>具体做法是对<code>grdcontour</code>的<code>-C</code>做修改，设置为<code>-C200,</code>。其他距离可以通过设定<code>-C</code>后面的数值实现。</p>
<h4 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gmt grdcontour file2.nc -JM4<span class="number">.5</span>i -R100/<span class="number">140</span>/<span class="number">15</span>/<span class="number">45</span> -C200, -D &gt; <span class="keyword">out</span>.d50</span><br><span class="line">gmt makecpt -Ccopper -T<span class="number">-0</span>/<span class="number">200</span>/<span class="number">10</span>&gt; t.cpt</span><br><span class="line"></span><br><span class="line">gmt grdimage file2.nc -JM4<span class="number">.5</span>i -R100/<span class="number">130</span>/<span class="number">15</span>/<span class="number">45</span> -P -K -Ct.cpt &gt; %ps%</span><br><span class="line">gmt psxy -R -J <span class="keyword">out</span>.d50 -W0<span class="number">.4</span>p,green -O -K &gt;&gt;%ps%</span><br><span class="line">gmt pscoast -R -JM4<span class="number">.5</span>i -Dl -A10000/<span class="number">0</span>/<span class="number">1</span> -B5g5 --FONT_TITLE=<span class="number">10</span>p -Gwhite -W0<span class="number">.1</span>p --MAP_ANNOT_OBLIQUE=<span class="number">45</span> -O -N1&gt;&gt; %ps%</span><br></pre></td></tr></table></figure>

<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p><img src="/images/gnss_sites.png" alt></p>
<center>距离岸线50km的GNSS站点分布</center>


<p><img src="/images/200.png" alt></p>
<center>距离岸线200km的等值线</center>

<h2 id="坐标文件"><a href="#坐标文件" class="headerlink" title="坐标文件"></a>坐标文件</h2><p>陆态网GNSS站点坐标<code>trc.dat</code>：<a href="https://www.jianguoyun.com/p/DZNDa0kQ2PCQBxih5ogE" target="_blank" rel="noopener">https://www.jianguoyun.com/p/DZNDa0kQ2PCQBxih5ogE</a><br>HY-2高度计卫星轨迹<code>hy2.dat</code>：<a href="https://www.jianguoyun.com/p/DZvezRQQ2PCQBxim5ogE" target="_blank" rel="noopener">https://www.jianguoyun.com/p/DZvezRQQ2PCQBxim5ogE</a><br>Jason-2高度计轨迹<code>ja.dat</code>：<a href="https://www.jianguoyun.com/p/Dfulo24Q2PCQBxiq5ogE" target="_blank" rel="noopener">https://www.jianguoyun.com/p/Dfulo24Q2PCQBxiq5ogE</a><br>沿海验潮站概略坐标<code>yh_tide.txt2</code>：<a href="https://www.jianguoyun.com/p/DaYSJ8kQ2PCQBxis5ogE" target="_blank" rel="noopener">https://www.jianguoyun.com/p/DaYSJ8kQ2PCQBxis5ogE</a><br>沿海GNSS业务化系统概略坐标<code>gnss.txt</code>：<a href="https://www.jianguoyun.com/p/DWhRCEUQ2PCQBxiv5ogE" target="_blank" rel="noopener">https://www.jianguoyun.com/p/DWhRCEUQ2PCQBxiv5ogE</a><br>绘图用的个别GNSS站点：<a href="https://www.jianguoyun.com/p/DdUqCG4Q2PCQBxi05ogE；" target="_blank" rel="noopener">https://www.jianguoyun.com/p/DdUqCG4Q2PCQBxi05ogE；</a> <a href="https://www.jianguoyun.com/p/DcBuNBsQ2PCQBxi15ogE" target="_blank" rel="noopener">https://www.jianguoyun.com/p/DcBuNBsQ2PCQBxi15ogE</a> </p>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gmt grdmath -R100/<span class="number">140</span>/<span class="number">15</span>/<span class="number">45</span> -A1000000/<span class="number">0</span>/<span class="number">4</span> -Dc -I10m LDISTG = dist_to_gshhg.nc</span><br></pre></td></tr></table></figure>

<p>这一行代码中的<code>-Dc</code>表示低分辨率海岸线，如果计算的区域比较大，使用低分辨率岸线可以加快时间。不然，计算速度可能非常慢。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://assz0a.coding-pages.com/2021/08/07/arctic-proj/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xingchi.jpg">
      <meta itemprop="name" content="Yang Lei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/07/arctic-proj/" class="post-title-link" itemprop="url">GMT极地投影</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-07 08:35:30" itemprop="dateCreated datePublished" datetime="2021-08-07T08:35:30+08:00">2021-08-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-08-08 22:25:22" itemprop="dateModified" datetime="2021-08-08T22:25:22+08:00">2021-08-08</time>
              </span>

          
            <span id="/2021/08/07/arctic-proj/" class="post-meta-item leancloud_visitors" data-flag-title="GMT极地投影" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/08/07/arctic-proj/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/08/07/arctic-proj/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>GMT的地图投影分成了4类，分别是圆锥投影、方位投影、圆柱投影和混合投影，共计有30多种投影方法。地球的极地区域多使用极地方位投影。</p>
<h2 id="极地方位投影-Polar-Stereographic-Map"><a href="#极地方位投影-Polar-Stereographic-Map" class="headerlink" title="极地方位投影 Polar Stereographic Map"></a>极地方位投影 Polar Stereographic Map</h2><p>方位投影特点是保持角度无变形，面积和距离有变形，又称为等角投影。方位投影多用于单个半球以及极地区域地图，当用于极地时成为<code>Polar Stereographic Map</code>，一般区域则成为<code>Stereographic Map</code>。</p>
<p><img src="/images/bianxing.jpg" alt></p>
<center>距离投影中心点越远，变形越大。</center>

<p>更多信息：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//m</span>anifold.net<span class="regexp">/doc/m</span>fd9<span class="regexp">/polar_stereographic_projection.htm</span></span><br></pre></td></tr></table></figure>

<p>下面使用一行代码绘制北极区域地图。如果需要叠加其他点、线等要素，则使用对应的命令追加即可。</p>
<h3 id="投影中心在北极点，展示极地区域"><a href="#投影中心在北极点，展示极地区域" class="headerlink" title="投影中心在北极点，展示极地区域"></a>投影中心在北极点，展示极地区域</h3><p>这种地图特点是边界为圆形，以北极点为中心，各纬圈方向变形均匀对称。</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gmt pscoast -R0/<span class="number">360</span>/<span class="number">60</span>/<span class="number">90</span> -JS0/<span class="number">90</span>/<span class="number">10</span>c -Bag -Dl -A25000 -Groyalblue -Sseashell &gt; GMT_stereographic_polar1.ps</span><br></pre></td></tr></table></figure>

<p><img src="/images/GMT_stereographic_polar1.png" alt></p>
<h3 id="投影中心点偏移，不在北极点"><a href="#投影中心点偏移，不在北极点" class="headerlink" title="投影中心点偏移，不在北极点"></a>投影中心点偏移，不在北极点</h3><p>通过设置<code>-JSlon/lat/size</code>中的<code>lon/lat</code>调整投影中心点。地图仍旧是圆形边界，但是中心点已经不是北极点，投影的变形也不具备对称特点。</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gmt pscoast -R120/<span class="number">260</span>/<span class="number">10</span>/<span class="number">75</span> -JS190/<span class="number">70</span>/<span class="number">10</span>c -Bag -Dl -A25000 -Groyalblue -Sseashell &gt; GMT_stereographic_polar2.ps</span><br></pre></td></tr></table></figure>

<p><img src="/images/GMT_stereographic_polar2.png" alt></p>
<h3 id="投影中心点偏移，非全极效果"><a href="#投影中心点偏移，非全极效果" class="headerlink" title="投影中心点偏移，非全极效果"></a>投影中心点偏移，非全极效果</h3><p>设置<code>-JSlon/lat/size</code>中的<code>lat</code>为90。但是<code>-R</code>的坐标范围是扇形区域，绘制出的地图也是扇形。</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gmt pscoast -R100/<span class="number">260</span>/<span class="number">10</span>/<span class="number">75</span> -JS180/<span class="number">90</span>/<span class="number">10</span>c -Bag -Dl -A25000 -Groyalblue -Sseashell &gt; GMT_stereographic_polar3.ps</span><br></pre></td></tr></table></figure>

<p><img src="/images/GMT_stereographic_polar3.png" alt></p>
<h3 id="矩形地图展示全极区"><a href="#矩形地图展示全极区" class="headerlink" title="矩形地图展示全极区"></a>矩形地图展示全极区</h3><p>通过设置<code>-R-45/50/135/50r</code>，以左下角和右上角坐标为边界，并且加<code>+r</code>。这种地图也较为常用，但是GMT绘制技巧埋藏的比较深，同样是<code>JS</code>投影，改变的仅仅是坐标边界。</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gmt pscoast -R<span class="number">-45</span>/<span class="number">50</span>/<span class="number">135</span>/<span class="number">50</span>r -JS0/<span class="number">90</span>/<span class="number">11</span>c -Ba30g30 -Dl -A25000 -Wthinnest -Groyalblue -Sseashell &gt; GMT_stereographic_rect.ps</span><br></pre></td></tr></table></figure>

<p><img src="/images/GMT_stereographic_rect.png" alt></p>
<h3 id="竖版地图"><a href="#竖版地图" class="headerlink" title="竖版地图"></a>竖版地图</h3><p>竖版地图对我们的海洋观念影响很大，在国内也一度热炒。GMT中有一种通用墨卡托全球投影（Transverse Mercator projection），可以将南北极同时绘制。</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gmt pscoast -R0/<span class="number">360</span>/<span class="number">-80</span>/<span class="number">80</span> -JT180/<span class="number">-30</span>/<span class="number">4</span>i -A25000 -Groyalblue -Sseashell  -Bg30a30 &gt;TMcontours.ps</span><br></pre></td></tr></table></figure>

<p><img src="/images/TMcontours34.png" alt></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Yang Lei"
      src="/images/xingchi.jpg">
  <p class="site-author-name" itemprop="name">Yang Lei</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">149</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">85</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://getmyte.com/" title="https:&#x2F;&#x2F;getmyte.com&#x2F;" rel="noopener" target="_blank">getmyte</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.economist.com/" title="https:&#x2F;&#x2F;www.economist.com&#x2F;" rel="noopener" target="_blank">Economist</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://l7.antv.vision/en/" title="https:&#x2F;&#x2F;l7.antv.vision&#x2F;en&#x2F;" rel="noopener" target="_blank">AntV</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yang Lei</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.0
  </div>

        






  <script>
  function leancloudSelector(url) {
    url = encodeURI(url);
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.getAttribute('id'));
      var title = visitors.getAttribute('data-flag-title');

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              })
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.getAttribute('id'));
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (let item of results) {
            let { url, time } = item;
            leancloudSelector(url).innerText = time;
          }
          for (let url of entries) {
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=a05sUJqbxBXDbnppdO8OVgiC-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method: method,
          headers: {
            'X-LC-Id': 'a05sUJqbxBXDbnppdO8OVgiC-gzGzoHsz',
            'X-LC-Key': 'YRcXfwqMVEWtFfgTumCdt2il',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el: '#valine-comments',
      verify: false,
      notify: false,
      appId: 'a05sUJqbxBXDbnppdO8OVgiC-gzGzoHsz',
      appKey: 'YRcXfwqMVEWtFfgTumCdt2il',
      placeholder: "Just go go",
      avatar: 'mm',
      meta: guest,
      pageSize: '10' || 10,
      visitor: false,
      lang: 'zh-cn' || 'zh-cn',
      path: location.pathname,
      recordIP: false,
      serverURLs: ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
